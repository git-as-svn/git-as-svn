<!DOCTYPE html>
<html lang="">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.18">
<meta name="author" content="Artem Navrotskiy, Marat Radchenko, Andrew Thornton">
<title>git-as-svn User Manual</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge .cm {
  color: #999988;
  font-style: italic;
}
pre.rouge .cp {
  color: #999999;
  font-weight: bold;
}
pre.rouge .c1 {
  color: #999988;
  font-style: italic;
}
pre.rouge .cs {
  color: #999999;
  font-weight: bold;
  font-style: italic;
}
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cpf {
  color: #999988;
  font-style: italic;
}
pre.rouge .err {
  color: #a61717;
  background-color: #e3d2d2;
}
pre.rouge .gd {
  color: #000000;
  background-color: #ffdddd;
}
pre.rouge .ge {
  color: #000000;
  font-style: italic;
}
pre.rouge .gr {
  color: #aa0000;
}
pre.rouge .gh {
  color: #999999;
}
pre.rouge .gi {
  color: #000000;
  background-color: #ddffdd;
}
pre.rouge .go {
  color: #888888;
}
pre.rouge .gp {
  color: #555555;
}
pre.rouge .gs {
  font-weight: bold;
}
pre.rouge .gu {
  color: #aaaaaa;
}
pre.rouge .gt {
  color: #aa0000;
}
pre.rouge .kc {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kd {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kn {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kp {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kr {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kt {
  color: #445588;
  font-weight: bold;
}
pre.rouge .k, pre.rouge .kv {
  color: #000000;
  font-weight: bold;
}
pre.rouge .mf {
  color: #009999;
}
pre.rouge .mh {
  color: #009999;
}
pre.rouge .il {
  color: #009999;
}
pre.rouge .mi {
  color: #009999;
}
pre.rouge .mo {
  color: #009999;
}
pre.rouge .m, pre.rouge .mb, pre.rouge .mx {
  color: #009999;
}
pre.rouge .sa {
  color: #000000;
  font-weight: bold;
}
pre.rouge .sb {
  color: #d14;
}
pre.rouge .sc {
  color: #d14;
}
pre.rouge .sd {
  color: #d14;
}
pre.rouge .s2 {
  color: #d14;
}
pre.rouge .se {
  color: #d14;
}
pre.rouge .sh {
  color: #d14;
}
pre.rouge .si {
  color: #d14;
}
pre.rouge .sx {
  color: #d14;
}
pre.rouge .sr {
  color: #009926;
}
pre.rouge .s1 {
  color: #d14;
}
pre.rouge .ss {
  color: #990073;
}
pre.rouge .s, pre.rouge .dl {
  color: #d14;
}
pre.rouge .na {
  color: #008080;
}
pre.rouge .bp {
  color: #999999;
}
pre.rouge .nb {
  color: #0086B3;
}
pre.rouge .nc {
  color: #445588;
  font-weight: bold;
}
pre.rouge .no {
  color: #008080;
}
pre.rouge .nd {
  color: #3c5d5d;
  font-weight: bold;
}
pre.rouge .ni {
  color: #800080;
}
pre.rouge .ne {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nf, pre.rouge .fm {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nl {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nn {
  color: #555555;
}
pre.rouge .nt {
  color: #000080;
}
pre.rouge .vc {
  color: #008080;
}
pre.rouge .vg {
  color: #008080;
}
pre.rouge .vi {
  color: #008080;
}
pre.rouge .nv, pre.rouge .vm {
  color: #008080;
}
pre.rouge .ow {
  color: #000000;
  font-weight: bold;
}
pre.rouge .o {
  color: #000000;
  font-weight: bold;
}
pre.rouge .w {
  color: #bbbbbb;
}
pre.rouge {
  background-color: #f8f8f8;
}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>git-as-svn User Manual</h1>
<div class="details">
<span id="author" class="author">Artem Navrotskiy</span><br>
<span id="email" class="email"><a href="https://github.com/git-as-svn">@bozaro</a></span><br>
<span id="author2" class="author">Marat Radchenko</span><br>
<span id="email2" class="email"><a href="https://github.com/slonopotamus">@slonopotamus</a></span><br>
<span id="author3" class="author">Andrew Thornton</span><br>
<span id="email3" class="email"><a href="https://github.com/zeripath">@zeripath</a></span><br>
<span id="revnumber">version 4.3.0,</span>
<span id="revdate">2026-02-04</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_about">1. About project</a>
<ul class="sectlevel2">
<li><a href="#_what_is_it">1.1. What is it?</a></li>
<li><a href="#_features">1.2. Features</a></li>
<li><a href="#_what_is_project_goal">1.3. What is project goal?</a></li>
<li><a href="#_why_do_we_need_it">1.4. Why do we need it?</a></li>
</ul>
</li>
<li><a href="#_install">2. Installation</a>
<ul class="sectlevel2">
<li><a href="#_gitattributes">2.1. .gitattributes</a></li>
<li><a href="#_installation_on_debianubuntu">2.2. Installation on Debian/Ubuntu</a>
<ul class="sectlevel3">
<li><a href="#_git_as_svn_package">2.2.1. git-as-svn package</a>
<ul class="sectlevel4">
<li><a href="#_used_directories">Used directories</a></li>
</ul>
</li>
<li><a href="#_git-as-svn-lfs">2.2.2. git-as-svn-lfs package</a></li>
</ul>
</li>
<li><a href="#_manual_download">2.3. Manual download</a></li>
</ul>
</li>
<li><a href="#_commandline">3. Command-line parameters</a></li>
<li><a href="#_gitlab">4. GitLab integration</a>
<ul class="sectlevel2">
<li><a href="#_configuration">4.1. Configuration</a></li>
<li><a href="#_supported_git_lfs_modes">4.2. Supported Git LFS modes</a></li>
<li><a href="#_full_configuration_file_example">4.3. Full configuration file example</a></li>
</ul>
</li>
<li><a href="#_gitea">5. Gitea integration</a></li>
<li><a href="#_lfs">6. LFS server</a>
<ul class="sectlevel2">
<li><a href="#_git_lfs_authenticate">6.1. git-lfs-authenticate</a></li>
<li><a href="#_running_git_a_svn_behind_nginx_reverse_proxy">6.2. Running git-a-svn behind Nginx reverse proxy</a></li>
</ul>
</li>
<li><a href="#_ldap">7. LDAP (Lightweight Directory Access Protocol)</a>
<ul class="sectlevel2">
<li><a href="#_supported_ldap_bind_methods">7.1. Supported LDAP bind methods</a>
<ul class="sectlevel3">
<li><a href="#_anonymous">7.1.1. ANONYMOUS</a></li>
<li><a href="#_cram_md5">7.1.2. CRAM-MD5</a></li>
<li><a href="#_digest_md5">7.1.3. DIGEST-MD5</a></li>
<li><a href="#_external">7.1.4. EXTERNAL</a></li>
<li><a href="#_plain">7.1.5. PLAIN</a></li>
<li><a href="#_simple">7.1.6. Simple</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_logging">8. Logging</a>
<ul class="sectlevel2">
<li><a href="#_loggers_available_in_git_as_svn">8.1. Loggers available in git-as-svn</a></li>
</ul>
</li>
<li><a href="#_authz">9. Path-based authorization</a>
<ul class="sectlevel2">
<li><a href="#_getting_started_with_path_based_access_control">9.1. Getting Started with Path-Based Access Control</a></li>
<li><a href="#_access_control_groups">9.2. Access Control Groups</a></li>
<li><a href="#_advanced_access_control_features">9.3. Advanced Access Control Features</a></li>
</ul>
</li>
<li><a href="#_props">10. SVN Properties</a>
<ul class="sectlevel2">
<li><a href="#_gitignore_file">10.1. .gitignore file</a></li>
<li><a href="#_gitattributes_file">10.2. .gitattributes file</a></li>
<li><a href="#_tgitconfig_file">10.3. .tgitconfig file</a></li>
<li><a href="#invalid-svn-props">10.4. Commit failed: Invalid svn properties on file</a></li>
</ul>
</li>
<li><a href="#_emptydirs">11. Empty directories</a></li>
<li><a href="#_comparison">12. Alternatives</a>
<ul class="sectlevel2">
<li><a href="#_github_subversion_support">12.1. GitHub Subversion support</a></li>
<li><a href="#_subgit">12.2. SubGit</a></li>
<li><a href="#_subversion_repository_and_git_svn">12.3. Subversion repository and git-svn</a></li>
</ul>
</li>
<li><a href="#_ssh">13. SVN+SSH</a>
<ul class="sectlevel2">
<li><a href="#_rationale">13.1. Rationale</a></li>
<li><a href="#_how_does_svnssh_work">13.2. How does SVN+SSH work?</a></li>
<li><a href="#_a_better_git_as_svn_svnserve">13.3. A better <code>git-as-svn-svnserve</code></a></li>
<li><a href="#_gitlab_git_as_svn_svnserve">13.4. GitLab &amp; git-as-svn-svnserve</a></li>
<li><a href="#_gitea_2">13.5. Gitea</a></li>
</ul>
</li>
<li><a href="#_internals">14. Internal implementation details</a>
<ul class="sectlevel2">
<li><a href="#_where_subversion_data_is_stored">14.1. Where Subversion data is stored?</a></li>
<li><a href="#_описание_хранения_информации_в_хранилище">14.2. Описание хранения информации в хранилище</a></li>
<li><a href="#_для_чего_нужно_хранилище">14.3. Для чего нужно хранилище</a>
<ul class="sectlevel3">
<li><a href="#_формат_хранения_информации_о_ревизиях">14.3.1. Формат хранения информации о ревизиях</a>
<ul class="sectlevel4">
<li><a href="#_содержимое_коммита">Содержимое коммита</a></li>
<li><a href="#_revision_0">Revision 0</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_how_does_commit_work">14.4. How does commit work?</a></li>
</ul>
</li>
<li><a href="#_changelog">15. Changelog</a>
<ul class="sectlevel2">
<li><a href="#_4_3_0">4.3.0</a></li>
<li><a href="#_4_2_1">4.2.1</a></li>
<li><a href="#_4_2_0">4.2.0</a></li>
<li><a href="#_4_1_0">4.1.0</a></li>
<li><a href="#_4_0_0">4.0.0</a></li>
<li><a href="#_3_0_0">3.0.0</a></li>
<li><a href="#_2_9_8">2.9.8</a></li>
<li><a href="#_2_9_7">2.9.7</a></li>
<li><a href="#_2_9_6">2.9.6</a></li>
<li><a href="#_2_9_5">2.9.5</a></li>
<li><a href="#_2_9_4">2.9.4</a></li>
<li><a href="#_2_9_3">2.9.3</a></li>
<li><a href="#_2_9_2">2.9.2</a></li>
<li><a href="#_2_9_1">2.9.1</a></li>
<li><a href="#_2_8_1">2.8.1</a></li>
<li><a href="#_2_8_0">2.8.0</a></li>
<li><a href="#_2_7_1">2.7.1</a></li>
<li><a href="#_2_6_0">2.6.0</a></li>
<li><a href="#_2_5_0">2.5.0</a></li>
<li><a href="#_2_4_0">2.4.0</a></li>
<li><a href="#_2_3_0">2.3.0</a></li>
<li><a href="#_2_2_0">2.2.0</a></li>
<li><a href="#_2_1_1">2.1.1</a></li>
<li><a href="#_2_1_0">2.1.0</a></li>
<li><a href="#_2_0_0">2.0.0</a></li>
<li><a href="#_1_30_1">1.30.1</a></li>
<li><a href="#_1_30_0">1.30.0</a></li>
<li><a href="#_1_29_0">1.29.0</a></li>
<li><a href="#_1_28_1">1.28.1</a></li>
<li><a href="#_1_28_0">1.28.0</a></li>
<li><a href="#_1_27_0">1.27.0</a></li>
<li><a href="#_1_26_1">1.26.1</a></li>
<li><a href="#_1_26_0">1.26.0</a></li>
<li><a href="#_1_25_2">1.25.2</a></li>
<li><a href="#_1_25_1">1.25.1</a></li>
<li><a href="#_1_25_0">1.25.0</a></li>
<li><a href="#_1_24_3">1.24.3</a></li>
<li><a href="#_1_24_2">1.24.2</a></li>
<li><a href="#_1_24_1">1.24.1</a></li>
<li><a href="#_1_24_0">1.24.0</a></li>
<li><a href="#_1_23_1">1.23.1</a></li>
<li><a href="#_1_23_0">1.23.0</a></li>
<li><a href="#_1_22_0">1.22.0</a></li>
<li><a href="#_1_21_9">1.21.9</a></li>
<li><a href="#_1_21_8">1.21.8</a></li>
<li><a href="#_1_21_7">1.21.7</a></li>
<li><a href="#_1_21_6">1.21.6</a></li>
<li><a href="#_1_21_5">1.21.5</a></li>
<li><a href="#_1_21_4">1.21.4</a></li>
<li><a href="#_1_21_3">1.21.3</a></li>
<li><a href="#_1_21_2">1.21.2</a></li>
<li><a href="#_1_21_1">1.21.1</a></li>
<li><a href="#_1_21_0">1.21.0</a></li>
<li><a href="#_1_20_5">1.20.5</a></li>
<li><a href="#_1_20_4">1.20.4</a></li>
<li><a href="#_1_20_3">1.20.3</a></li>
<li><a href="#_1_20_2">1.20.2</a></li>
<li><a href="#_1_20_1">1.20.1</a></li>
<li><a href="#_1_20_0">1.20.0</a></li>
<li><a href="#_1_19_3">1.19.3</a></li>
<li><a href="#_1_19_2">1.19.2</a></li>
<li><a href="#_1_19_1">1.19.1</a></li>
<li><a href="#_1_19_0">1.19.0</a></li>
<li><a href="#_1_18_0">1.18.0</a></li>
<li><a href="#_1_17_0">1.17.0</a></li>
<li><a href="#_1_16_0">1.16.0</a></li>
<li><a href="#_1_15_0">1.15.0</a></li>
<li><a href="#_1_14_0">1.14.0</a></li>
<li><a href="#_1_13_0">1.13.0</a></li>
<li><a href="#_1_12_0">1.12.0</a></li>
<li><a href="#_1_11_1">1.11.1</a></li>
<li><a href="#_1_11_0">1.11.0</a></li>
<li><a href="#_1_10_1">1.10.1</a></li>
<li><a href="#_1_10_0">1.10.0</a></li>
<li><a href="#_1_9_0">1.9.0</a></li>
<li><a href="#_1_8_1">1.8.1</a></li>
<li><a href="#_1_8_0">1.8.0</a></li>
<li><a href="#_1_7_6_1">1.7.6.1</a></li>
<li><a href="#_1_7_6">1.7.6</a></li>
<li><a href="#_1_7_5">1.7.5</a></li>
<li><a href="#_1_7_4">1.7.4</a></li>
<li><a href="#_1_7_3">1.7.3</a></li>
<li><a href="#_1_7_2">1.7.2</a></li>
<li><a href="#_1_7_1">1.7.1</a></li>
<li><a href="#_1_7_0">1.7.0</a></li>
<li><a href="#_1_6_2">1.6.2</a></li>
<li><a href="#_1_6_1">1.6.1</a></li>
<li><a href="#_1_6_0">1.6.0</a></li>
<li><a href="#_1_5_0">1.5.0</a></li>
<li><a href="#_1_4_0">1.4.0</a></li>
<li><a href="#_1_3_0">1.3.0</a></li>
<li><a href="#_1_2_0">1.2.0</a></li>
<li><a href="#_1_1_9">1.1.9</a></li>
<li><a href="#_1_1_8">1.1.8</a></li>
<li><a href="#_1_1_7">1.1.7</a></li>
<li><a href="#_1_1_6">1.1.6</a></li>
<li><a href="#_1_1_5">1.1.5</a></li>
<li><a href="#_1_1_4">1.1.4</a></li>
<li><a href="#_1_1_3">1.1.3</a></li>
<li><a href="#_1_1_2">1.1.2</a></li>
<li><a href="#_1_1_1">1.1.1</a></li>
<li><a href="#_1_1_0">1.1.0</a></li>
<li><a href="#_1_0_17_alpha">1.0.17-alpha</a></li>
<li><a href="#_1_0_16_alpha">1.0.16-alpha</a></li>
<li><a href="#_1_0_15_alpha">1.0.15-alpha</a></li>
<li><a href="#_1_0_14_alpha">1.0.14-alpha</a></li>
<li><a href="#_1_0_13_alpha">1.0.13-alpha</a></li>
<li><a href="#_1_0_12_alpha">1.0.12-alpha</a></li>
<li><a href="#_1_0_11_alpha">1.0.11-alpha</a></li>
<li><a href="#_1_0_10_alpha">1.0.10-alpha</a></li>
<li><a href="#_1_0_9_alpha">1.0.9-alpha</a></li>
<li><a href="#_1_0_8_alpha">1.0.8-alpha</a></li>
<li><a href="#_1_0_7_alpha">1.0.7-alpha</a></li>
<li><a href="#_1_0_6_alpha">1.0.6-alpha</a></li>
<li><a href="#_1_0_5_alpha">1.0.5-alpha</a></li>
<li><a href="#_1_0_4_alpha">1.0.4-alpha</a></li>
<li><a href="#_1_0_3_alpha">1.0.3-alpha</a></li>
<li><a href="#_1_0_2_alpha">1.0.2-alpha</a></li>
<li><a href="#_1_0_1_alpha">1.0.1-alpha</a></li>
<li><a href="#_1_0_0_alpha">1.0.0-alpha</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_about"><a class="anchor" href="#_about"></a><a class="link" href="#_about">1. About project</a></h2>
<div class="sectionbody">
<div class="imageblock right">
<div class="content">
<a class="image" href="https://github.com/git-as-svn/git-as-svn/edit/master/src/docs/asciidoc/_about.adoc"><img src="https://img.shields.io/badge/improve-this%20doc-orange.svg" alt="improve this%20doc orange"></a>
</div>
</div>
<div class="sect2">
<h3 id="_what_is_it"><a class="anchor" href="#_what_is_it"></a><a class="link" href="#_what_is_it">1.1. What is it?</a></h3>
<div class="paragraph">
<p>git-as-svn (<a href="https://github.com/git-as-svn/git-as-svn" class="bare">https://github.com/git-as-svn/git-as-svn</a>) emulates Subversion repository on top of Git repository.</p>
</div>
<div class="paragraph">
<p>It allows you to work with Git repositories using any tool compatible with Subversion 1.8+:
console <code>svn</code>, TortoiseSVN, SvnKit, SmartSVN, etc.</p>
</div>
</div>
<div class="sect2">
<h3 id="_features"><a class="anchor" href="#_features"></a><a class="link" href="#_features">1.2. Features</a></h3>
<div class="paragraph">
<p>This implementation allows the majority of Subversion-users to work without thinking about what they actually use Git-repository.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Nearly all Subversion commands:</p>
<div class="ulist">
<ul>
<li>
<p>svn checkout, update, switch, diff</p>
</li>
<li>
<p>svn commit</p>
</li>
<li>
<p>svn copy, move <sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup></p>
</li>
<li>
<p>svn cat, ls</p>
</li>
<li>
<p>svn lock, unlock</p>
</li>
<li>
<p>svnsync</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="#_authz">Path-based authorization</a></p>
</li>
<li>
<p><a href="#_props">Transparent mapping of .gitattributes/.gitignore to Subversion properties</a></p>
</li>
<li>
<p><a href="#_lfs">Git LFS</a>, including locks</p>
</li>
<li>
<p>Git submodules <sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup></p>
</li>
<li>
<p><a href="#_ldap">LDAP user authentication</a></p>
</li>
<li>
<p><a href="#_gitlab">GitLab integration</a></p>
</li>
<li>
<p><a href="#_gitea">Gitea integration</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_what_is_project_goal"><a class="anchor" href="#_what_is_project_goal"></a><a class="link" href="#_what_is_project_goal">1.3. What is project goal?</a></h3>
<div class="paragraph">
<p>The project is designed to allow you to work with the same repository as Git, Subversion and style.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Git style</dt>
<dd>
<p>The basic idea is that the developer works in the local branch.
His changes do not affect the work of other developers, but nonetheless they can be tested on CI farm, review by another developer and etc.</p>
<div class="paragraph">
<p>This allows each developer to work independently, as best he can.
He can change and saving intermediate versions of documents, taking full advantage of the version control system (including access to the change history) even without network connection to the server.</p>
</div>
<div class="paragraph">
<p>Unfortunately, this approach does not work with not mergeable documents (for example, binary files).</p>
</div>
</dd>
<dt class="hdlist1">Subversion style</dt>
<dd>
<p>The use of a centralized version control system is more convenient in the case of documents do not support the merge (for example, with binary files) due to the presence of the locking mechanism and a simpler and shorter publication cycle changes.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The need to combine Git and Subversion style work with one repository arises from the fact that different employees in the same project are working from fundamentally different data.
If you overdo, you Git programmers, and artists like Subversion.</p>
</div>
</div>
<div class="sect2">
<h3 id="_why_do_we_need_it"><a class="anchor" href="#_why_do_we_need_it"></a><a class="link" href="#_why_do_we_need_it">1.4. Why do we need it?</a></h3>
<div class="paragraph">
<p>This project was born out of division teams working on another project into two camps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>People who have tasted the Git and do not want to use Subversion (eg programmers);</p>
</li>
<li>
<p>People who do not get from Git practical use and do not want to work with him, but love Subversion (eg designers).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To divide the project into two repository desire was not for various reasons.</p>
</div>
<div class="paragraph">
<p>At this point, saw the project <a href="http://git.q42.co.uk/git_svn_server.git" class="bare">http://git.q42.co.uk/git_svn_server.git</a> with Proof-of-concept implementation svn server for git repository.
After this realization svn server on top of git and didn&#8217;t seem completely crazy idea (now it&#8217;s just a crazy idea) and started this project.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_install"><a class="anchor" href="#_install"></a><a class="link" href="#_install">2. Installation</a></h2>
<div class="sectionbody">
<div class="imageblock right">
<div class="content">
<a class="image" href="https://github.com/git-as-svn/git-as-svn/edit/master/src/docs/asciidoc/_install.adoc"><img src="https://img.shields.io/badge/improve-this%20doc-orange.svg" alt="improve this%20doc orange"></a>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Subversion versions prior to 1.8 are <strong>not</strong> supported because git-as-svn relies on <a href="https://subversion.apache.org/docs/release-notes/1.8.html#iprops">inherited properties</a> Subversion feature.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_gitattributes"><a class="anchor" href="#_gitattributes"></a><a class="link" href="#_gitattributes">2.1. .gitattributes</a></h3>
<div class="paragraph">
<p>By default, Git uses native line ending for text files and determines whether file is text or not using heuristics that do not match Subversion behavior.</p>
</div>
<div class="paragraph">
<p>In order to fix this discrepancy, add the following to your <code>.gitattributes</code> file:</p>
</div>
<div class="listingblock">
<div class="title">.gitattributes</div>
<div class="content">
<pre>*   -text</pre>
</div>
</div>
<div class="paragraph">
<p>This will force Git to store files as-is unless end-of-line conversion is explicitly configured for them.
See <a href="https://git-scm.com/docs/gitattributes">gitattributes documentation</a> for additional info.</p>
</div>
</div>
<div class="sect2">
<h3 id="_installation_on_debianubuntu"><a class="anchor" href="#_installation_on_debianubuntu"></a><a class="link" href="#_installation_on_debianubuntu">2.2. Installation on Debian/Ubuntu</a></h3>
<div class="paragraph">
<p>You can install git-as-svn on Debian/Ubuntu using the following commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="c"># Set up repository</span>
curl <span class="nt">-1sLf</span> <span class="s1">'https://dl.cloudsmith.io/public/git-as-svn/git-as-svn/setup.deb.sh'</span> | <span class="nb">sudo</span> <span class="nt">-E</span> bash

<span class="c"># Install git-as-svn</span>
<span class="nb">sudo </span>apt-get <span class="nb">install </span>git-as-svn

<span class="c"># You only need this if you plan to use git-as-svn builtin Git-LFS server</span>
<span class="nb">sudo </span>apt-get <span class="nb">install </span>git-as-svn-lfs</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_git_as_svn_package"><a class="anchor" href="#_git_as_svn_package"></a><a class="link" href="#_git_as_svn_package">2.2.1. git-as-svn package</a></h4>
<div class="paragraph">
<p>This package contains the git-as-svn.</p>
</div>
<div class="paragraph">
<p>After you install git-as-svn is run in daemon mode and is available on the svn-protocol on port 3690. The daemon runs as <code>git</code> user.</p>
</div>
<div class="paragraph">
<p>To access the server, you can use the user:</p>
</div>
<div class="paragraph">
<p>Login: test</p>
</div>
<div class="paragraph">
<p>Password: test</p>
</div>
<div class="paragraph">
<p>You can check configuration with command like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">svn <span class="nb">ls</span> <span class="nt">--username</span> <span class="nb">test</span> <span class="nt">--password</span> <span class="nb">test </span>svn://localhost/example/master</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_used_directories"><a class="anchor" href="#_used_directories"></a><a class="link" href="#_used_directories">Used directories</a></h5>
<div class="paragraph">
<p>This package by default is configured to use the following directories:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">/etc/git-as-svn</dt>
<dd>
<p>This directory contains git-as-svn configuration files.</p>
</dd>
<dt class="hdlist1">/usr/share/doc/git-as-svn</dt>
<dd>
<p>This directory contains git-as-svn documentation.</p>
</dd>
<dt class="hdlist1">/var/git/lfs</dt>
<dd>
<p>This directory contains Git Large File Storage files.</p>
<div class="paragraph">
<p>It must be writable by user <code>git</code>.</p>
</div>
</dd>
<dt class="hdlist1">/var/git/repositories</dt>
<dd>
<p>This directory is used by default to store the Git-repositories.</p>
<div class="paragraph">
<p>It must be writable by user <code>git</code>.</p>
</div>
</dd>
<dt class="hdlist1">/var/log/git-as-svn</dt>
<dd>
<p>This directory is used to record log files.</p>
<div class="paragraph">
<p>It must be writable by user <code>git</code>.</p>
</div>
<div class="paragraph">
<p>See <a href="#_logging">logging documentation</a> on log configuration.</p>
</div>
</dd>
<dt class="hdlist1">/var/cache/git-as-svn</dt>
<dd>
<p>This directory is used to store the git-as-svn cache.</p>
<div class="paragraph">
<p>It must be writable by user <code>git</code>.</p>
</div>
<div class="paragraph">
<p>The loss of the contents of this directory is not critical for operation and does not entail the loss of user data.</p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_git-as-svn-lfs"><a class="anchor" href="#_git-as-svn-lfs"></a><a class="link" href="#_git-as-svn-lfs">2.2.2. git-as-svn-lfs package</a></h4>
<div class="paragraph">
<p>This package contains the <code>git-lfs-authenticate</code> script required for <a href="#_lfs">git-as-svn builtin LFS server</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_manual_download"><a class="anchor" href="#_manual_download"></a><a class="link" href="#_manual_download">2.3. Manual download</a></h3>
<div class="paragraph">
<p>To try git-as-svn you need:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install Java 21 or later;</p>
</li>
<li>
<p>Download archive from site
<a href="https://github.com/git-as-svn/git-as-svn/releases/latest" class="bare">https://github.com/git-as-svn/git-as-svn/releases/latest</a>;</p>
</li>
<li>
<p>After unpacking the archive change working path to the uncompressed directory and run the command:</p>
<div class="listingblock">
<div class="content">
<pre>bin/git-as-svn -c doc/examples/config.yml</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>This will start git-as-svn server with following configuration:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The server is accessible via svn-protocol on port 3690.</p>
<div class="paragraph">
<p>You can check server with command like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>svn ls svn://localhost/example/master</pre>
</div>
</div>
</li>
<li>
<p>To access the server, you can use the user:</p>
<div class="paragraph">
<p>Login: test</p>
</div>
<div class="paragraph">
<p>Password: test</p>
</div>
</li>
<li>
<p>Cache and repository will be created in <code>build</code> directory:</p>
<div class="ulist">
<ul>
<li>
<p><code>example.git</code> — repository directory, accessible via svn-protocol;</p>
</li>
<li>
<p><code>git-as-svn.mapdb*</code> — cache files for expensive computed data.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_commandline"><a class="anchor" href="#_commandline"></a><a class="link" href="#_commandline">3. Command-line parameters</a></h2>
<div class="sectionbody">
<div class="imageblock right">
<div class="content">
<a class="image" href="https://github.com/git-as-svn/git-as-svn/edit/master/src/docs/asciidoc/_commandline.adoc"><img src="https://img.shields.io/badge/improve-this%20doc-orange.svg" alt="improve this%20doc orange"></a>
</div>
</div>
<div class="paragraph">
<p>git-as-svn supports the following command-line parameters:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>-?</code> | <code>-h</code> | <code>--help</code></dt>
<dd>
<p>print help for command-line parameters.</p>
</dd>
<dt class="hdlist1"><code>-c &lt;file&gt;</code> | <code>--config &lt;file&gt;</code></dt>
<dd>
<p>use an alternative configuration <em>file</em> instead of a default file.</p>
</dd>
<dt class="hdlist1"><code>-t</code></dt>
<dd>
<p>test the configuration file: git-as-svn checks the configuration for correct syntax.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>-t</code> doesn&#8217;t perform full git-as-svn initialization, so it is still possible that git-as-svn will fail to startup due to invalid configuration even though <code>-t</code> passed successfully.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>-T</code></dt>
<dd>
<p>same as <code>-t</code>, but additionally dump configuration files to standard output.</p>
</dd>
<dt class="hdlist1"><code>-v</code> | <code>--version</code></dt>
<dd>
<p>print git-as-svn version.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_gitlab"><a class="anchor" href="#_gitlab"></a><a class="link" href="#_gitlab">4. GitLab integration</a></h2>
<div class="sectionbody">
<div class="imageblock right">
<div class="content">
<a class="image" href="https://github.com/git-as-svn/git-as-svn/edit/master/src/docs/asciidoc/_gitlab.adoc"><img src="https://img.shields.io/badge/improve-this%20doc-orange.svg" alt="improve this%20doc orange"></a>
</div>
</div>
<div class="paragraph">
<p>git-as-svn supports integration with <a href="https://gitlab.com/">GitLab</a> &gt;= 10.2.</p>
</div>
<div class="paragraph">
<p>This includes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>User authentication against GitLab</p>
</li>
<li>
<p>Access control depending on user permissions in GitLab</p>
</li>
<li>
<p>Usage of GitLab LFS server for transparent handling of LFS files for svn users</p>
</li>
<li>
<p>Automatic discovery of new repositories created in GitLab</p>
</li>
<li>
<p>Running GitLab repository hooks if any installed</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_configuration"><a class="anchor" href="#_configuration"></a><a class="link" href="#_configuration">4.1. Configuration</a></h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This chapter assumes that GitLab is installed using standard Omnibus installation to <code>/opt/gitlab</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>git-as-svn uses direct file access to Git repositories, so it needs to run from the same user as GitLab (normally, <code>git</code>).
If you&#8217;re installing both git-as-svn and Gitlab from Debian packages, no additional actions are required.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create GitLab <a href="https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html">Personal Access token</a> for git-as-svn.
Token needs to have following scopes: <code>api</code>, <code>sudo</code>, <code>read_repository</code>, <code>read_user</code>, <code>write_repository</code>. Do <strong>not</strong> add <code>read_api</code> scope to token.</p>
</li>
<li>
<p>Change <code>userDB</code> to <code>!gitlabUsers</code>.
This will tell git-as-svn to authenticate users against GitLab server:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">userDB</span><span class="pi">:</span> <span class="kt">!gitlabUsers</span> <span class="pi">{</span>
  <span class="c1"># Users can either authenticate using their GitLab login+password or login+access token</span>
  <span class="c1"># Possible values: Password, AccessToken</span>
  <span class="c1"># Default: Password</span>
  <span class="c1">#</span>
  <span class="c1"># authentication: Password</span>
<span class="pi">}</span></code></pre>
</div>
</div>
</li>
<li>
<p>Configure builtin git-as-svn webserver:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">shared</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="kt">!web</span>

    <span class="c1"># git-as-svn base url. Leave empty for autodetect.</span>
    <span class="c1"># Default: empty</span>
    <span class="c1">#</span>
    <span class="c1"># baseUrl: http://localhost:8123/</span>

    <span class="na">listen</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="kt">!http</span>

        <span class="c1"># The network interface where git-as-svn web server binds to as an IP address or a hostname.  If 0.0.0.0, then bind to all interfaces.</span>
        <span class="c1"># Default: localhost</span>
        <span class="c1">#</span>
        <span class="c1"># host: localhost</span>

        <span class="c1"># Port where git-as-svn web server listens on.</span>
        <span class="c1"># Default: 8123</span>
        <span class="c1">#</span>
        <span class="c1"># port: 8123</span>

        <span class="c1"># HTTP idle timeout milliseconds. If not a single byte is sent or received over HTTP connection, git-as-svn closes it.</span>
        <span class="c1"># -1 = Use Jetty default</span>
        <span class="c1"># 0 = Disable timeout</span>
        <span class="c1"># Default: -1</span>
        <span class="c1">#</span>
        <span class="c1"># idleTimeout: -1</span>

        <span class="c1"># Tells git-as-svn to handle X-Forwarded-* headers.</span>
        <span class="c1"># Enable this if git-as-svn web server is running behind reverse HTTP proxy (like nginx)</span>
        <span class="c1"># Default: false</span>
        <span class="c1">#</span>
        <span class="c1"># forwarded: false</span></code></pre>
</div>
</div>
</li>
<li>
<p>Configure GitLab URL and token:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">shared</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="kt">!gitlab</span>

    <span class="c1"># GitLab base URL. This must match GitLab EXTERNAL_URL.</span>
    <span class="c1"># Default: http://localhost/</span>
    <span class="c1">#</span>
    <span class="na">url</span><span class="pi">:</span> <span class="s">&lt;GitLab URL&gt;</span>

    <span class="c1"># GitLab access token. Note that git-as-svn requires sudo access.</span>
    <span class="na">token</span><span class="pi">:</span> <span class="s">&lt;GitLab Access Token&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p>Configure git-as-svn to use GitLab as repository list source:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">repositoryMapping</span><span class="pi">:</span> <span class="kt">!gitlabMapping</span>

  <span class="c1"># Filesystem location where GitLab stores repositories</span>
  <span class="c1"># Note that git-as-svn requires write access</span>
  <span class="c1"># Default: /var/opt/gitlab/git-data/repositories/</span>
  <span class="c1">#</span>
  <span class="c1"># path: /var/opt/gitlab/git-data/repositories/</span>

  <span class="c1"># Common settings for all repositories exposed to svn://</span>
  <span class="c1">#</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="na">pusher</span><span class="pi">:</span> <span class="kt">!pushEmbedded</span>
      <span class="c1"># This tells git-as-svn where GitLab commit hooks are located</span>
      <span class="na">hooksPath</span><span class="pi">:</span> <span class="s">/opt/gitlab/embedded/service/gitaly-ruby/git-hooks</span></code></pre>
</div>
</div>
</li>
<li>
<p><strong>Restart git-as-svn after changing its config</strong>.
If your OS uses Systemd, this can be done via <code>sudo systemctl restart git-as-svn</code>.</p>
</li>
<li>
<p>Add <code>git-as-svn:&lt;branch&gt;</code> topics to whatever repositories you want to add to git-as-svn via "Settings &#8594; General &#8594; Topics" in GitLab project settings.
For example, add <code>git-as-svn:master</code> to expose <code>master</code> branch.
If you want to expose more than one branch, add multiple <code>git-as-svn:&lt;branch&gt;</code> topics separated by commas.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_supported_git_lfs_modes"><a class="anchor" href="#_supported_git_lfs_modes"></a><a class="link" href="#_supported_git_lfs_modes">4.2. Supported Git LFS modes</a></h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>git-as-svn uses GitLab LFS API for write operations and direct disk access for read operations.
This is recommended option.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">lfsMode</span><span class="pi">:</span> <span class="kt">!fileLfs</span>
  <span class="c1"># Directory where GitLab stores LFS ojects</span>
  <span class="na">path</span><span class="pi">:</span> <span class="s">/var/opt/gitlab/gitlab-rails/shared/lfs-objects</span></code></pre>
</div>
</div>
</li>
<li>
<p>git-as-svn uses GitLab LFS API for all LFS operations. This mode is slower than <code>!fileLfs</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">lfsMode</span><span class="pi">:</span> <span class="kt">!httpLfs</span> <span class="pi">{}</span></code></pre>
</div>
</div>
</li>
<li>
<p>git-as-svn doesn&#8217;t use LFS at all</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">lfsMode</span><span class="pi">:</span> <span class="no">null</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_full_configuration_file_example"><a class="anchor" href="#_full_configuration_file_example"></a><a class="link" href="#_full_configuration_file_example">4.3. Full configuration file example</a></h3>
<details>
<summary class="title">/etc/git-as-svn/git-as-svn.conf</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="kt">!config:</span>

<span class="c1"># Specifies IP to listen to for svn:// connections</span>
<span class="c1"># Default: 0.0.0.0</span>
<span class="c1">#</span>
<span class="c1"># host: 0.0.0.0</span>

<span class="c1"># Specifies port number to listen to for svn:// connections</span>
<span class="c1"># Default: 3690</span>
<span class="c1">#</span>
<span class="c1"># port: 3690</span>

<span class="c1"># Subversion realm name. Subversion uses this for credentials caching</span>
<span class="c1"># Default: git-as-svn realm</span>
<span class="c1">#</span>
<span class="c1"># realm: git-as-svn realm</span>

<span class="c1"># Traffic compression level. Supported values: LZ4, Zlib, None</span>
<span class="c1"># Default: LZ4</span>
<span class="c1">#</span>
<span class="c1"># compressionLevel: LZ4</span>

<span class="c1"># If enabled, git-as-svn indexed repositories in parallel during startup</span>
<span class="c1"># This results in higher memory usage so may require adjustments to JVM memory options</span>
<span class="c1"># Default: true</span>
<span class="c1">#</span>
<span class="c1"># parallelIndexing: true</span>

<span class="c1"># Sets cache location</span>
<span class="na">cacheConfig</span><span class="pi">:</span> <span class="kt">!persistentCache</span>
  <span class="na">path</span><span class="pi">:</span> <span class="s">/var/cache/git-as-svn/git-as-svn.mapdb</span>

<span class="c1"># Tells git-as-svn to use GitLab API for repository list</span>
<span class="na">repositoryMapping</span><span class="pi">:</span> <span class="kt">!gitlabMapping</span>

  <span class="c1"># Filesystem location where GitLab stores repositories</span>
  <span class="c1"># Note that git-as-svn requires write access</span>
  <span class="c1"># You normally do not need to change it</span>
  <span class="c1"># Default: /var/opt/gitlab/git-data/repositories/</span>
  <span class="c1">#</span>
  <span class="c1"># path: /var/opt/gitlab/git-data/repositories/</span>

  <span class="c1"># Common settings for all repositories exposed to svn://</span>
  <span class="c1">#</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="c1"># renameDetection: true</span>
    <span class="c1"># emptyDirs: Disabled</span>
    <span class="c1"># format: Latest</span>
    <span class="na">pusher</span><span class="pi">:</span> <span class="kt">!pushEmbedded</span>
      <span class="c1"># This tells git-as-svn where GitLab commit hooks are located</span>
      <span class="na">hooksPath</span><span class="pi">:</span> <span class="s">/opt/gitlab/embedded/service/gitaly-ruby/git-hooks</span>

<span class="c1"># Tells git-as-svn to authenticate users against GitLab</span>
<span class="na">userDB</span><span class="pi">:</span> <span class="kt">!gitlabUsers</span> <span class="pi">{</span>
  <span class="c1"># Users can either authenticate using their GitLab login+password or login+access token</span>
  <span class="c1"># Possible values: Password, AccessToken</span>
  <span class="c1"># Default: Password</span>
  <span class="c1">#</span>
  <span class="c1"># authentication: Password</span>
<span class="pi">}</span>

<span class="na">shared</span><span class="pi">:</span>

  <span class="c1"># git-as-svn builtin web server</span>
  <span class="c1"># It is used for GitLab system hook for repository creation/deletion notifications</span>
  <span class="c1"># Also, git-as-svn builtin LFS server is served through it</span>
  <span class="pi">-</span> <span class="kt">!web</span>

    <span class="c1"># git-as-svn base url. Leave empty for autodetect.</span>
    <span class="c1"># Default: empty</span>
    <span class="c1">#</span>
    <span class="c1"># baseUrl: http://localhost:8123/</span>

    <span class="na">listen</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="kt">!http</span> <span class="pi">{</span>

        <span class="c1"># The network interface where git-as-svn web server binds to as an IP address or a hostname.  If 0.0.0.0, then bind to all interfaces.</span>
        <span class="c1"># Default: localhost</span>
        <span class="c1">#</span>
        <span class="c1"># host: localhost</span>

        <span class="c1"># Port where git-as-svn web server listens on.</span>
        <span class="c1"># Default: 8123</span>
        <span class="c1">#</span>
        <span class="c1"># port: 8123</span>

        <span class="c1"># HTTP idle timeout milliseconds. If not a single byte is sent or received over HTTP connection, git-as-svn closes it.</span>
        <span class="c1"># -1 = Use Jetty default</span>
        <span class="c1"># 0 = Disable timeout</span>
        <span class="c1"># Default: -1</span>
        <span class="c1">#</span>
        <span class="c1"># idleTimeout: -1</span>

        <span class="c1"># Tells git-as-svn to handle X-Forwarded-* headers.</span>
        <span class="c1"># Enable this if git-as-svn web server is running behind reverse HTTP proxy (like nginx)</span>
        <span class="c1"># Default: false</span>
        <span class="c1">#</span>
        <span class="c1"># forwarded: false</span>
      <span class="pi">}</span>

  <span class="c1"># Configures GitLab access for git-as-svn</span>
  <span class="pi">-</span> <span class="kt">!gitlab</span>

    <span class="c1"># GitLab base URL</span>
    <span class="c1"># Default: http://localhost/</span>
    <span class="c1">#</span>
    <span class="c1"># url: http://localhost/</span>

    <span class="c1"># Tells git-as-svn to use GitLab for LFS objects and file locking</span>
    <span class="c1"># Default: !httpLfs {}</span>
    <span class="c1">#</span>
    <span class="na">lfsMode</span><span class="pi">:</span> <span class="kt">!fileLfs</span>
      <span class="c1"># Directory where GitLab stores LFS ojects</span>
      <span class="na">path</span><span class="pi">:</span> <span class="s">/var/opt/gitlab/gitlab-rails/shared/lfs-objects</span>

    <span class="c1"># GitLab access token</span>
    <span class="c1"># Note that git-as-svn requires sudo access</span>
    <span class="na">token</span><span class="pi">:</span> <span class="s">&lt;GitLab Access Token&gt;</span>

    <span class="c1"># Path to Gitaly socket file</span>
    <span class="c1"># You normally do not need to change it</span>
    <span class="c1"># Default: /var/opt/gitlab/gitaly/gitaly.socket</span>
    <span class="c1">#</span>
    <span class="c1"># gitalySocket: /var/opt/gitlab/gitaly/gitaly.socket</span>

    <span class="c1"># Gitaly secret token</span>
    <span class="c1"># This must match gitaly_token in /etc/gitlab/gitlab.rb</span>
    <span class="c1"># You normally do not need to change it</span>
    <span class="c1"># Default: secret token</span>
    <span class="c1">#</span>
    <span class="c1"># gitalyToken: secret token</span>

    <span class="c1"># Path to Gitaly binaries dir</span>
    <span class="c1"># You normally do not need to change it</span>
    <span class="c1"># Default: /opt/gitlab/embedded/bin</span>
    <span class="c1">#</span>
    <span class="c1"># gitalyBinDir: /opt/gitlab/embedded/bin</span>

    <span class="c1"># Value for GL_PROTOCOL hooks environment variable</span>
    <span class="c1"># See https://docs.gitlab.com/ee/administration/server_hooks.html#environment-variables-available-to-server-hooks</span>
    <span class="c1"># Possible values: HTTP, SSH, Web</span>
    <span class="c1"># Default: Web</span>
    <span class="c1">#</span>
    <span class="c1"># glProtocol: Web</span></code></pre>
</div>
</div>
</div>
</details>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_gitea"><a class="anchor" href="#_gitea"></a><a class="link" href="#_gitea">5. Gitea integration</a></h2>
<div class="sectionbody">
<div class="imageblock right">
<div class="content">
<a class="image" href="https://github.com/git-as-svn/git-as-svn/edit/master/src/docs/asciidoc/_gitea.adoc"><img src="https://img.shields.io/badge/improve-this%20doc-orange.svg" alt="improve this%20doc orange"></a>
</div>
</div>
<div class="paragraph">
<p>git-as-svn supports integration with <a href="https://gitea.io">Gitea</a> &gt;= v1.7.2.</p>
</div>
<div class="paragraph">
<p>This includes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>User authentication against Gitea</p>
</li>
<li>
<p>Access control depending on user permissions in Gitea</p>
</li>
<li>
<p>Usage of Gitea LFS server for transparent handling of LFS files for svn users</p>
</li>
<li>
<p>Automatic discovery of new repositories created in Gitea</p>
</li>
<li>
<p>Running Gitea repository hooks if any installed</p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
git-as-svn requires Sudo Gitea token
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
git-as-svn uses direct file access to Git repositories, so it needs to run from the same user as Gitea
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Configuration file example:</p>
</div>
<div class="exampleblock">
<div class="title">Example 1. /etc/git-as-svn/git-as-svn.conf</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="kt">!config:</span>

<span class="c1"># Specifies IP to listen to for svn:// connections</span>
<span class="c1"># Default: 0.0.0.0</span>
<span class="c1">#</span>
<span class="c1"># host: 0.0.0.0</span>

<span class="c1"># Specifies port number to listen to for svn:// connections</span>
<span class="c1"># Default: 3690</span>
<span class="c1">#</span>
<span class="c1"># port: 3690</span>

<span class="c1"># Subversion realm name. Subversion uses this for credentials caching</span>
<span class="c1"># Default: git-as-svn realm</span>
<span class="c1">#</span>
<span class="c1"># realm: git-as-svn realm</span>

<span class="c1"># Traffic compression level. Supported values: LZ4, Zlib, None</span>
<span class="c1"># Default: LZ4</span>
<span class="c1">#</span>
<span class="c1"># compressionLevel: LZ4</span>

<span class="c1"># If enabled, git-as-svn indexed repositories in parallel during startup</span>
<span class="c1"># This results in higher memory usage so may require adjustments to JVM memory options</span>
<span class="c1"># Default: true</span>
<span class="c1">#</span>
<span class="c1"># parallelIndexing: true</span>

<span class="c1"># Sets cache location</span>
<span class="na">cacheConfig</span><span class="pi">:</span> <span class="kt">!persistentCache</span>
  <span class="na">path</span><span class="pi">:</span> <span class="s">/var/cache/git-as-svn/git-as-svn.mapdb</span>

<span class="c1"># Tells git-as-svn to use Gitea API for repository list</span>
<span class="na">repositoryMapping</span><span class="pi">:</span> <span class="kt">!giteaMapping</span>

  <span class="c1"># Filesystem location where Gitea stores repositories</span>
  <span class="c1"># Note that git-as-svn requires write access</span>
  <span class="na">path</span><span class="pi">:</span> <span class="s">/data/git/repositories</span>

  <span class="c1"># Common settings for all repositories exposed to svn://</span>
  <span class="c1">#</span>
  <span class="c1"># template:</span>
  <span class="c1">#   branches:</span>
  <span class="c1">#     - master</span>
  <span class="c1">#   renameDetection: true</span>
  <span class="c1">#   emptyDirs: Disabled</span>
  <span class="c1">#   format: Latest</span>

<span class="c1"># Tells git-as-svn to use Gitea API for user authentication</span>
<span class="na">userDB</span><span class="pi">:</span> <span class="kt">!giteaUsers</span> <span class="pi">{}</span>

<span class="na">shared</span><span class="pi">:</span>
  <span class="c1"># Configures Gitea API for git-as-svn</span>
  <span class="pi">-</span> <span class="kt">!gitea</span>

    <span class="c1"># URL where your Gitea instance API is available</span>
    <span class="na">url</span><span class="pi">:</span> <span class="s">http://localhost:3000/api/v1</span>

    <span class="c1"># Tells git-as-svn to store Git-LFS objects through Gitea LFS API</span>
    <span class="c1"># Note that this needs to be in sync with Gitea LFS_START_SERVER config option</span>
    <span class="na">lfs</span><span class="pi">:</span> <span class="no">false</span>

    <span class="c1"># Gitea access token</span>
    <span class="c1"># Note that git-as-svn requires Gitea Sudo permission in order to authenticate users</span>
    <span class="na">token</span><span class="pi">:</span> <span class="s">90c68b84fb04e364c2ea3fc42a6a2193144bc07d</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_lfs"><a class="anchor" href="#_lfs"></a><a class="link" href="#_lfs">6. LFS server</a></h2>
<div class="sectionbody">
<div class="imageblock right">
<div class="content">
<a class="image" href="https://github.com/git-as-svn/git-as-svn/edit/master/src/docs/asciidoc/_lfs.adoc"><img src="https://img.shields.io/badge/improve-this%20doc-orange.svg" alt="improve this%20doc orange"></a>
</div>
</div>
<div class="paragraph">
<p>git-as-svn has built-in <a href="https://git-lfs.github.com/">Git Large File Storage</a> server.</p>
</div>
<div class="paragraph">
<p>Configuration file example:</p>
</div>
<details>
<summary class="title">/etc/git-as-svn/git-as-svn.conf</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">shared</span><span class="pi">:</span>

  <span class="c1"># git-as-svn builtin web server</span>
  <span class="c1"># It is used for GitLab system hook for repository creation/deletion notifications</span>
  <span class="c1"># Also, git-as-svn builtin LFS server is served through it</span>
  <span class="pi">-</span> <span class="kt">!web</span>

    <span class="c1"># git-as-svn base url. Leave empty for autodetect.</span>
    <span class="c1"># Default: empty</span>
    <span class="c1">#</span>
    <span class="c1"># baseUrl: http://localhost:8123/</span>

    <span class="na">listen</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="kt">!http</span> <span class="pi">{</span>

        <span class="c1"># The network interface where git-as-svn web server binds to as an IP address or a hostname.  If 0.0.0.0, then bind to all interfaces.</span>
        <span class="c1"># Default: localhost</span>
        <span class="c1">#</span>
        <span class="c1"># host: localhost</span>

        <span class="c1"># Port where git-as-svn web server listens on.</span>
        <span class="c1"># Default: 8123</span>
        <span class="c1">#</span>
        <span class="c1"># port: 8123</span>

        <span class="c1"># HTTP idle timeout milliseconds. If not a single byte is sent or received over HTTP connection, git-as-svn closes it.</span>
        <span class="c1"># -1 = Use Jetty default</span>
        <span class="c1"># 0 = Disable timeout</span>
        <span class="c1"># Default: -1</span>
        <span class="c1">#</span>
        <span class="c1"># idleTimeout: -1</span>

        <span class="c1"># Tells git-as-svn to handle X-Forwarded-* headers.</span>
        <span class="c1"># Enable this if git-as-svn web server is running behind reverse HTTP proxy (like nginx)</span>
        <span class="c1"># Default: false</span>
        <span class="c1">#</span>
        <span class="c1"># forwarded: false</span>
      <span class="pi">}</span>

  <span class="c1"># Git LFS server</span>
  <span class="pi">-</span> <span class="kt">!localLfs</span>
    <span class="c1"># Secret token for git-lfs-authenticate script</span>
    <span class="c1"># secretToken:</span>
    <span class="na">path</span><span class="pi">:</span> <span class="s">/var/git/lfs</span></code></pre>
</div>
</div>
</div>
</details>
<div class="sect2">
<h3 id="_git_lfs_authenticate"><a class="anchor" href="#_git_lfs_authenticate"></a><a class="link" href="#_git_lfs_authenticate">6.1. git-lfs-authenticate</a></h3>
<div class="paragraph">
<p>Script <code>git-lfs-authenticate</code> (provided by <a href="#_git-as-svn-lfs">git-as-svn-lfs package</a>) is used by git-lfs to obtain credentials for HTTP access to Git LFS server for Git-users working with Git repository by SSH (<a href="https://github.com/github/git-lfs/blob/master/docs/api/README.md" class="bare">https://github.com/github/git-lfs/blob/master/docs/api/README.md</a>).</p>
</div>
<div class="paragraph">
<p>To check the settings of the script can be run locally on the server the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="c"># Set environment variable defined in configuration file</span>
<span class="nb">export </span><span class="nv">GL_ID</span><span class="o">=</span>key-1
<span class="c"># Check access to repository</span>
<span class="nb">sudo </span>su git <span class="nt">-c</span> <span class="s2">"git-lfs-authenticate example download"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Or on the client the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">ssh git@remote <span class="nt">-C</span> <span class="s2">"git-lfs-authenticate example download"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The output should look something like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.github.com/lfs/git-as-svn/git-as-svn"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"Authorization"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bearer SOME-SECRET-TOKEN"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"expires_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-02-19T18:56:59Z"</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_running_git_a_svn_behind_nginx_reverse_proxy"><a class="anchor" href="#_running_git_a_svn_behind_nginx_reverse_proxy"></a><a class="link" href="#_running_git_a_svn_behind_nginx_reverse_proxy">6.2. Running git-a-svn behind Nginx reverse proxy</a></h3>
<div class="ulist">
<ul>
<li>
<p>Add git-as-svn upstream server:</p>
<div class="listingblock">
<div class="title">/etc/nginx/nginx.conf</div>
<div class="content">
<pre> upstream gitsvn {
   server      localhost:8123  fail_timeout=5s;
   keepalive   100;
 }</pre>
</div>
</div>
</li>
<li>
<p>Add resource redirection:</p>
<div class="listingblock">
<div class="title">/etc/nginx/nginx.conf</div>
<div class="content">
<pre>   location ~ ^.*\.git/info/lfs/ {
     proxy_read_timeout      300;
     proxy_connect_timeout   300;
     proxy_redirect          off;

     proxy_http_version  1.1;
     proxy_set_header    Connection          "";

     proxy_set_header    Host                $http_host;
     proxy_set_header    X-Real-IP           $remote_addr;
     proxy_set_header    X-Forwarded-For     $proxy_add_x_forwarded_for;
     proxy_set_header    X-Forwarded-Proto   $scheme;
     proxy_set_header    X-Frame-Options     SAMEORIGIN;

     proxy_pass http://gitsvn;
   }</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Also you need to set <code>baseUrl</code> parameter in <code>!web</code> section of git-as-svn configuration file to external URL accessible to LFS users.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ldap"><a class="anchor" href="#_ldap"></a><a class="link" href="#_ldap">7. LDAP (Lightweight Directory Access Protocol)</a></h2>
<div class="sectionbody">
<div class="imageblock right">
<div class="content">
<a class="image" href="https://github.com/git-as-svn/git-as-svn/edit/master/src/docs/asciidoc/_ldap.adoc"><img src="https://img.shields.io/badge/improve-this%20doc-orange.svg" alt="improve this%20doc orange"></a>
</div>
</div>
<div class="paragraph">
<p>git-as-svn supports LDAP for user authentication.
Refer to your LDAP server documentation to find out what configuration is appropriate in your case.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Internally, git-as-svn uses <a href="https://ldap.com/unboundid-ldap-sdk-for-java/">UnboundID LDAP SDK for Java</a> for all LDAP communication.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">/etc/git-as-svn/git-as-svn.conf</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="c1"># Authenticates a user by binding to the directory with the DN of the entry for that user and the password</span>
<span class="c1"># presented by the user. If this simple bind succeeds the user is considered to be authenticated.</span>
<span class="na">userDB</span><span class="pi">:</span> <span class="kt">!ldapUsers</span>

  <span class="c1"># LDAP server URL</span>
  <span class="c1"># It usually specifies the domain name of the directory server to connect to,</span>
  <span class="c1"># and optionally the port number and distinguished name (DN) of the required root naming context.</span>
  <span class="c1"># For secure connections, use ldaps://</span>
  <span class="c1">#</span>
  <span class="na">connectionUrl</span><span class="pi">:</span> <span class="s">ldap://localhost:389/ou=groups,dc=mycompany,dc=com</span>

  <span class="c1"># Optional LDAP SSL certificate for secure LDAP connections</span>
  <span class="c1">#</span>
  <span class="c1"># ldapCertPem: /path/to/ldap.pem</span>

  <span class="c1"># Pattern specifying the LDAP search filter to use after substitution of the username.</span>
  <span class="c1">#</span>
  <span class="na">searchFilter</span><span class="pi">:</span> <span class="s">(&amp;(objectClass=person)(objectClass=user))</span>

  <span class="c1"># LDAP bind configuration</span>
  <span class="c1">#</span>
  <span class="c1"># [see next documentation section]</span>

  <span class="c1"># LDAP attribute, containing user login.</span>
  <span class="c1"># Default: sAMAccountName</span>
  <span class="c1">#</span>
  <span class="c1"># loginAttribute: sAMAccountName</span>

  <span class="c1"># LDAP attribute, containing user name.</span>
  <span class="c1"># Default: name</span>
  <span class="c1">#</span>
  <span class="c1"># nameAttribute: name</span>

  <span class="c1"># LDAP attribute, containing user email.</span>
  <span class="c1"># Default: mail</span>
  <span class="c1">#</span>
  <span class="c1"># emailAttribute: mail</span></code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_supported_ldap_bind_methods"><a class="anchor" href="#_supported_ldap_bind_methods"></a><a class="link" href="#_supported_ldap_bind_methods">7.1. Supported LDAP bind methods</a></h3>
<div class="sect3">
<h4 id="_anonymous"><a class="anchor" href="#_anonymous"></a><a class="link" href="#_anonymous">7.1.1. ANONYMOUS</a></h4>
<div class="paragraph">
<p>Performs SASL ANONYMOUS bind as described in <a href="http://www.ietf.org/rfc/rfc4505.txt">RFC 4505</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This is default bind type.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">userDB</span><span class="pi">:</span> <span class="kt">!ldapUsers</span>
  <span class="na">bind</span><span class="pi">:</span> <span class="kt">!ANONYMOUS</span> <span class="pi">{}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cram_md5"><a class="anchor" href="#_cram_md5"></a><a class="link" href="#_cram_md5">7.1.2. CRAM-MD5</a></h4>
<div class="paragraph">
<p>Performs SASL CRAM-MD5 bind as described in <a href="https://tools.ietf.org/html/draft-ietf-sasl-crammd5-10">draft-ietf-sasl-crammd5</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">userDB</span><span class="pi">:</span> <span class="kt">!ldapUsers</span>
  <span class="na">bind</span><span class="pi">:</span> <span class="kt">!CRAMMD5</span>
    <span class="na">authenticationID</span><span class="pi">:</span> <span class="s">&lt;required&gt;</span>
    <span class="na">password</span><span class="pi">:</span> <span class="s">&lt;required&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_digest_md5"><a class="anchor" href="#_digest_md5"></a><a class="link" href="#_digest_md5">7.1.3. DIGEST-MD5</a></h4>
<div class="paragraph">
<p>Performs SASL DIGEST-MD5 bind as described in <a href="http://www.ietf.org/rfc/rfc2831.txt">RFC 2831</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">userDB</span><span class="pi">:</span> <span class="kt">!ldapUsers</span>
  <span class="na">bind</span><span class="pi">:</span> <span class="kt">!DIGESTMD5</span>
    <span class="na">authenticationID</span><span class="pi">:</span> <span class="s">&lt;required&gt;</span>
    <span class="na">authorizationID</span><span class="pi">:</span> <span class="s">&lt;optional&gt;</span>
    <span class="na">password</span><span class="pi">:</span> <span class="s">&lt;required&gt;</span>
    <span class="na">realm</span><span class="pi">:</span> <span class="s">&lt;optional&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_external"><a class="anchor" href="#_external"></a><a class="link" href="#_external">7.1.4. EXTERNAL</a></h4>
<div class="paragraph">
<p>Performs SASL EXTERNAL bind as described in <a href="http://www.ietf.org/rfc/rfc4422.txt">RFC 4422</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">userDB</span><span class="pi">:</span> <span class="kt">!ldapUsers</span>
  <span class="na">bind</span><span class="pi">:</span> <span class="kt">!EXTERNAL</span>
    <span class="na">authenticationID</span><span class="pi">:</span> <span class="s">&lt;optional&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_plain"><a class="anchor" href="#_plain"></a><a class="link" href="#_plain">7.1.5. PLAIN</a></h4>
<div class="paragraph">
<p>Performs SASL PLAIN bind as described in <a href="http://www.ietf.org/rfc/rfc4616.txt">RFC 4616</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">userDB</span><span class="pi">:</span> <span class="kt">!ldapUsers</span>
  <span class="na">bind</span><span class="pi">:</span> <span class="kt">!PLAIN</span>
    <span class="na">authenticationID</span><span class="pi">:</span> <span class="s">&lt;required&gt;</span>
    <span class="na">authorizationID</span><span class="pi">:</span> <span class="s">&lt;optional&gt;</span>
    <span class="na">password</span><span class="pi">:</span> <span class="s">&lt;required&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_simple"><a class="anchor" href="#_simple"></a><a class="link" href="#_simple">7.1.6. Simple</a></h4>
<div class="paragraph">
<p>Performs LDAPv3 simple bind operation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">userDB</span><span class="pi">:</span> <span class="kt">!ldapUsers</span>
  <span class="na">bind</span><span class="pi">:</span> <span class="kt">!Simple</span>
    <span class="na">bindDn</span><span class="pi">:</span> <span class="s">&lt;optional&gt;</span>
    <span class="na">password</span><span class="pi">:</span> <span class="s">&lt;optional&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_logging"><a class="anchor" href="#_logging"></a><a class="link" href="#_logging">8. Logging</a></h2>
<div class="sectionbody">
<div class="imageblock right">
<div class="content">
<a class="image" href="https://github.com/git-as-svn/git-as-svn/edit/master/src/docs/asciidoc/_logging.adoc"><img src="https://img.shields.io/badge/improve-this%20doc-orange.svg" alt="improve this%20doc orange"></a>
</div>
</div>
<div class="paragraph">
<p>git-as-svn uses <a href="https://logging.apache.org/log4j/2.x/">Apache Log4j 2</a> for logging.
Configuration file is located in <code>/etc/git-as-svn/log4j2.xml</code>.
Please, refer to <a href="https://logging.apache.org/log4j/2.x/manual/configuration.html">Log4j 2 documentation</a> on this file format and available options.</p>
</div>
<div class="paragraph">
<p>By default, all messages with INFO priority and higher are logged to <code>/var/log/git-as-svn/git-as-svn.log</code> and rotated at startup and per each 10 MB.
Also, all messages with ERROR priority and higher are logged to <code>/var/log/git-as-svn/git-as-svn.error.log</code> with same rotation policy.</p>
</div>
<div class="paragraph">
<p>For example, if you want to increase logging verbosity by switching to DEBUG logging, you need to change <code>&lt;Root level="info"&gt;</code> to <code>&lt;Root level="debug"&gt;</code> in <code>/etc/git-as-svn/log4j2.xml</code></p>
</div>
<div class="sect2">
<h3 id="_loggers_available_in_git_as_svn"><a class="anchor" href="#_loggers_available_in_git_as_svn"></a><a class="link" href="#_loggers_available_in_git_as_svn">8.1. Loggers available in git-as-svn</a></h3>
<div class="ulist">
<ul>
<li>
<p><code>git</code> - messages related to operations with Git repositories</p>
</li>
<li>
<p><code>gitea</code> - messages related to communication with <a href="https://gitea.io/">Gitea</a></p>
</li>
<li>
<p><code>gitlab</code> - messages related to communication with <a href="https://gitea.io/">GitLab</a></p>
</li>
<li>
<p><code>ldap</code> - messages related to LDAP user authentication</p>
</li>
<li>
<p><code>lfs</code> - messages related to Git LFS, including both internal and external LFS server if any of them is configured</p>
</li>
<li>
<p><code>misc</code> - few unsorted messages, mostly related to startup/shutdown procedures</p>
</li>
<li>
<p><code>svn</code> - messages related to incoming SVN connections</p>
</li>
<li>
<p><code>web</code> - messages related to builtin HTTP server</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Additionally, git-as-svn uses some third-party libraries, most notable are JGit and Jetty, that can also log various stuff.
Please, refer to their appropriate documentation on available loggers for these projects.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_authz"><a class="anchor" href="#_authz"></a><a class="link" href="#_authz">9. Path-based authorization</a></h2>
<div class="sectionbody">
<div class="imageblock right">
<div class="content">
<a class="image" href="https://github.com/git-as-svn/git-as-svn/edit/master/src/docs/asciidoc/_authz.adoc"><img src="https://img.shields.io/badge/improve-this%20doc-orange.svg" alt="improve this%20doc orange"></a>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This feature is currently only supported for <code>repositoryMapping: !listMapping</code>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>git-as-svn supports path-based authorization that allows granting (or denying) permissions to users, very similar to Subversion <a href="http://svnbook.red-bean.com/nightly/en/svn.serverconfig.pathbasedauthz.html">path-based authorization</a> feature.
Typically this is done over the entire repository: a user can read the repository (or not), and they can write to the repository (or not).</p>
</div>
<div class="paragraph">
<p>It&#8217;s also possible, however, to define finer-grained access rules.
One set of users may have permission to write to a certain directory in the repository, but not others; another directory might not even be readable by all but a few special people.
It&#8217;s even possible to restrict access on a per file basis.</p>
</div>
<div class="sect2">
<h3 id="_getting_started_with_path_based_access_control"><a class="anchor" href="#_getting_started_with_path_based_access_control"></a><a class="link" href="#_getting_started_with_path_based_access_control">9.1. Getting Started with Path-Based Access Control</a></h3>
<div class="paragraph">
<p>Here&#8217;s a simple example demonstrating a piece of the access configuration which grants read access Sally, and read/write access to Harry, for the path <code>/path/to/directory/</code> (and all its children) in the repository <code>calc</code>:</p>
</div>
<div class="listingblock">
<div class="title">git-as-svn.conf</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">repositoryMapping</span><span class="pi">:</span> <span class="kt">!listMapping</span>
  <span class="na">repositories</span><span class="pi">:</span>
    <span class="na">calc</span><span class="pi">:</span>
      <span class="na">access</span><span class="pi">:</span>
        <span class="na">/path/to/directory</span><span class="pi">:</span>
          <span class="na">harry</span><span class="pi">:</span> <span class="s">rw</span>
          <span class="na">sally</span><span class="pi">:</span> <span class="s">r</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Permissions are inherited from a path&#8217;s parent directory.
That means we can specify a subdirectory with a different access policy for Sally.
Let&#8217;s continue our previous example, and grant Sally write access to a child of the directory that she&#8217;s otherwise permitted only to read:</p>
</div>
<div class="listingblock">
<div class="title">git-as-svn.conf</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">repositoryMapping</span><span class="pi">:</span> <span class="kt">!listMapping</span>
  <span class="na">repositories</span><span class="pi">:</span>
    <span class="na">calc</span><span class="pi">:</span>
      <span class="na">access</span><span class="pi">:</span>
        <span class="na">/path/to/directory</span><span class="pi">:</span>
          <span class="na">harry</span><span class="pi">:</span> <span class="s">rw</span>
          <span class="na">sally</span><span class="pi">:</span> <span class="s">r</span>
        <span class="na">/path/to/directory/subdirectory</span><span class="pi">:</span>
          <span class="na">sally</span><span class="pi">:</span> <span class="s">rw</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now Sally can write to subdirectory, but can still only read other parts.
Harry, meanwhile, continues to have complete read/write access to the whole directory.</p>
</div>
<div class="paragraph">
<p>It&#8217;s also possible to explicitly deny permission to someone via inheritance rules, by using empty string or <code>none</code>:</p>
</div>
<div class="listingblock">
<div class="title">git-as-svn.conf</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">repositoryMapping</span><span class="pi">:</span> <span class="kt">!listMapping</span>
  <span class="na">repositories</span><span class="pi">:</span>
    <span class="na">calc</span><span class="pi">:</span>
      <span class="na">access</span><span class="pi">:</span>
        <span class="na">/path/to/directory</span><span class="pi">:</span>
          <span class="na">harry</span><span class="pi">:</span> <span class="s">rw</span>
          <span class="na">sally</span><span class="pi">:</span> <span class="s">r</span>
        <span class="na">/path/to/directory/secret</span><span class="pi">:</span>
          <span class="na">harry</span><span class="pi">:</span> <span class="s">none</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, Harry has read/write access to the entire directory, but has absolutely no access at all to the <code>secret</code> subdirectory within it.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The thing to remember is that the most specific path always matches first.
The server tries to match the path itself, and then the parent of the path, then the parent of that, and so on.
The net effect is that mentioning a specific path in the access file will always override any permissions inherited from parent directories.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>By default, nobody has any access to any repository at all.
If you want to give at least read permission to all users at the roots of the repositories.
You can do this by using the asterisk variable (<code>*</code>), which means "all users":</p>
</div>
<div class="listingblock">
<div class="title">git-as-svn.conf</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">repositoryMapping</span><span class="pi">:</span> <span class="kt">!listMapping</span>
  <span class="na">repositories</span><span class="pi">:</span>
    <span class="na">calc</span><span class="pi">:</span>
      <span class="na">access</span><span class="pi">:</span>
        <span class="na">/</span><span class="pi">:</span>
          <span class="s1">'</span><span class="s">*'</span><span class="err">:</span> <span class="s">r</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that while all of the previous examples use directories, that&#8217;s only because defining access rules on directories is the most common case.
You may similarly restrict access on file paths, too.</p>
</div>
<div class="listingblock">
<div class="title">git-as-svn.conf</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">repositoryMapping</span><span class="pi">:</span> <span class="kt">!listMapping</span>
  <span class="na">repositories</span><span class="pi">:</span>
    <span class="na">calc</span><span class="pi">:</span>
      <span class="na">access</span><span class="pi">:</span>
        <span class="na">/README.md</span><span class="pi">:</span>
          <span class="na">harry</span><span class="pi">:</span> <span class="s">rw</span>
          <span class="na">sally</span><span class="pi">:</span> <span class="s">r</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You may also specify grant or restrict access only to specific branches.</p>
</div>
<div class="listingblock">
<div class="title">git-as-svn.conf</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">repositoryMapping</span><span class="pi">:</span> <span class="kt">!listMapping</span>
  <span class="na">repositories</span><span class="pi">:</span>
    <span class="na">calc</span><span class="pi">:</span>
      <span class="na">access</span><span class="pi">:</span>
        <span class="na">/README.md</span><span class="pi">:</span>
          <span class="na">harry</span><span class="pi">:</span> <span class="s">r</span>
        <span class="s">master:/README.md:</span>
          <span class="s">harry</span><span class="err">:</span> <span class="s">rw</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, Harry has read access to file on all branches but has read/write access on master branch.</p>
</div>
</div>
<div class="sect2">
<h3 id="_access_control_groups"><a class="anchor" href="#_access_control_groups"></a><a class="link" href="#_access_control_groups">9.2. Access Control Groups</a></h3>
<div class="paragraph">
<p>git-as-svn also allows you to define whole groups of users.
To do this, describe your groups within <code>groups</code> section of <code>git-as-svn.conf</code> :</p>
</div>
<div class="listingblock">
<div class="title">git-as-svn.conf</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">repositoryMapping</span><span class="pi">:</span> <span class="kt">!listMapping</span>
  <span class="na">groups</span><span class="pi">:</span>
    <span class="na">calc-developers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">harry</span>
      <span class="pi">-</span> <span class="s">sally</span>
      <span class="pi">-</span> <span class="s">joe</span>
    <span class="na">paint-developers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">frank</span>
      <span class="pi">-</span> <span class="s">sally</span>
      <span class="pi">-</span> <span class="s">jane</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Groups can be granted access control just like users.
Distinguish them with an "at sign" (<code>@</code>) prefix:</p>
</div>
<div class="listingblock">
<div class="title">git-as-svn.conf</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">repositoryMapping</span><span class="pi">:</span> <span class="kt">!listMapping</span>
  <span class="na">repositories</span><span class="pi">:</span>
    <span class="na">calc</span><span class="pi">:</span>
      <span class="na">access</span><span class="pi">:</span>
        <span class="na">/</span><span class="pi">:</span>
          <span class="s1">'</span><span class="s">@calc-developers'</span><span class="err">:</span> <span class="s">rw</span>
    <span class="na">paint</span><span class="pi">:</span>
      <span class="na">access</span><span class="pi">:</span>
        <span class="na">/</span><span class="pi">:</span>
          <span class="s1">'</span><span class="s">jane'</span><span class="err">:</span> <span class="s">r</span>
          <span class="s">'@paint-developers'</span><span class="err">:</span> <span class="s">rw</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Another important fact is that group permissions are not overridden by individual user permissions.
Rather, the <em>combination</em> of all matching permissions is granted.
In the prior example, Jane is a member of the <code>paint-developers</code> group, which has read/write access.
Combined with the <code>jane = r</code> rule, this still gives Jane read/write access.
Permissions for group members can only be extended beyond the permissions the group already has.
Restricting users who are part of a group to less than their group&#8217;s permissions is impossible.</p>
</div>
<div class="paragraph">
<p>Groups can also be defined to contain other groups:</p>
</div>
<div class="listingblock">
<div class="title">git-as-svn.conf</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">repositoryMapping</span><span class="pi">:</span> <span class="kt">!listMapping</span>
  <span class="na">groups</span><span class="pi">:</span>
    <span class="na">calc-developers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">harry</span>
      <span class="pi">-</span> <span class="s">sally</span>
      <span class="pi">-</span> <span class="s">joe</span>
    <span class="na">paint-developers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">frank</span>
      <span class="pi">-</span> <span class="s">sally</span>
      <span class="pi">-</span> <span class="s">jane</span>
    <span class="na">everyone</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s1">'</span><span class="s">@calc-developers'</span>
      <span class="pi">-</span> <span class="s1">'</span><span class="s">@paint-developers'</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
User needs read/write access to <code>/</code> path of <code>master</code> branch in order to be able to download/upload files from git-as-svn <a href="#_lfs">internal LFS server</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_advanced_access_control_features"><a class="anchor" href="#_advanced_access_control_features"></a><a class="link" href="#_advanced_access_control_features">9.3. Advanced Access Control Features</a></h3>
<div class="paragraph">
<p>git-as-svn also supports some "magic" tokens for helping you to make rule assignments based on the user&#8217;s authentication class.
One such token is the <code>$authenticated</code> token.
Use this token where you would otherwise specify a username or group name in your authorization rules to declare the permissions granted to any user who has authenticated with any username at all.
You may also use <code>$authenticated:Local</code>/<code>$authenticated:GitLab</code>/<code>$authenticated:Gitea</code>/<code>$authenticated:LDAP</code> to refer to users authenticated against specific user database.
Similarly employed is the <code>$anonymous</code> token, except that it matches everyone who has not authenticated with a username.</p>
</div>
<div class="listingblock">
<div class="title">git-as-svn.conf</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">repositoryMapping</span><span class="pi">:</span> <span class="kt">!listMapping</span>
  <span class="na">repositories</span><span class="pi">:</span>
    <span class="na">calendar</span><span class="pi">:</span>
      <span class="na">access</span><span class="pi">:</span>
        <span class="na">/</span><span class="pi">:</span>
          <span class="s1">'</span><span class="s">$anonymous'</span><span class="err">:</span> <span class="s">r</span>
          <span class="s">'$authenticated'</span><span class="err">:</span> <span class="s">rw</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_props"><a class="anchor" href="#_props"></a><a class="link" href="#_props">10. SVN Properties</a></h2>
<div class="sectionbody">
<div class="imageblock right">
<div class="content">
<a class="image" href="https://github.com/git-as-svn/git-as-svn/edit/master/src/docs/asciidoc/_props.adoc"><img src="https://img.shields.io/badge/improve-this%20doc-orange.svg" alt="improve this%20doc orange"></a>
</div>
</div>
<div class="paragraph">
<p>git-as-svn has limited support for <a href="http://svnbook.red-bean.com/en/1.7/svn.ref.properties.html::">Subversion Properties</a>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Proper operation of this feature requires Subversion client version 1.8 or later.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_gitignore_file"><a class="anchor" href="#_gitignore_file"></a><a class="link" href="#_gitignore_file">10.1. .gitignore file</a></h3>
<div class="paragraph">
<p>git-as-svn transparently builds <code>svn:ignore</code> and <code>svn:global-ignores</code> Subversion Properties based on <code>.gitignore</code> files in Git repository.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="title">.gitignore</div>
<div class="content">
<pre>*.class
*/build</pre>
</div>
</div>
<div class="paragraph">
<p>Results in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ svn pl -v &lt;repo&gt;
Properties on '&lt;repo&gt;':
    svn:global-ignores
        *.class

$ svn pl -v &lt;repo&gt;/foo/
Properties on '&lt;repo&gt;/foo/':
    svn:ignore
        build</pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Negated path masks (<code>!/path/</code>) are not supported
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_gitattributes_file"><a class="anchor" href="#_gitattributes_file"></a><a class="link" href="#_gitattributes_file">10.2. .gitattributes file</a></h3>
<div class="paragraph">
<p>git-as-svn transparently builds <code>svn:eol-style</code>, <code>svn:mime-type</code> and <code>svn:auto-props</code> Subversion Properties based on <code>.gitattributes</code> files in Git repository.</p>
</div>
<div class="paragraph">
<p>For example, create <code>.gitattributes</code> with the following contents:</p>
</div>
<div class="listingblock">
<div class="title">.gitattributes</div>
<div class="content">
<pre>*.txt text
*.xml eol=lf
*.bin binary</pre>
</div>
</div>
<div class="paragraph">
<p>It will be automatically exposed to Subversion via <code>svn:auto-props</code> property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ svn pl -v &lt;repo&gt;
Properties on '&lt;repo&gt;':
  svn:auto-props
    *.txt = svn:eol-style=native
    *.xml = svn:eol-style=LF
    *.bin = svn:mime-type=application/octet-stream</pre>
</div>
</div>
<div class="paragraph">
<p>Additionally, individual files that match <code>.gitattributes</code> entries, will get corresponding Subversion properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ svn pl -v &lt;repo&gt;/native.txt
Properties on '&lt;repo&gt;/native.txt':
  svn:eol-style
    native

$ svn pl -v '&lt;repo&gt;/unix.xml':
Properties on '&lt;repo&gt;/unix.xml':
  svn:eol-style
    LF

$ svn pl -v '&lt;repo&gt;/binary.bin':
  svn:mime-type
    application/octet-stream</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_tgitconfig_file"><a class="anchor" href="#_tgitconfig_file"></a><a class="link" href="#_tgitconfig_file">10.3. .tgitconfig file</a></h3>
<div class="paragraph">
<p>Please, refer to <a href="https://tortoisegit.org/docs/tortoisegit/tgit-dug-settings.html#tgit-dug-settings-git">TortoiseGit documentation</a> on exact syntax of <code>.tgitconfig</code> file</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="title">.tgitconfig</div>
<div class="content">
<pre>[bugtraq]
    logregex = #(\\d+)
    url = https://github.com/git-as-svn/git-as-svn/issues/%BUGID%
    warnifnoissue = false</pre>
</div>
</div>
<div class="paragraph">
<p>git-as-svn converts this to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ svn pl -v &lt;repo&gt;
Properties on '&lt;repo&gt;':
  bugtraq:logregex
    #(\\d+)
  bugtraq:url
    https://github.com/git-as-svn/git-as-svn/issues/%BUGID%
  bugtraq:warnifnoissue
    false</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="invalid-svn-props"><a class="anchor" href="#invalid-svn-props"></a><a class="link" href="#invalid-svn-props">10.4. Commit failed: Invalid svn properties on file</a></h3>
<div class="paragraph">
<p>If you get "Commit failed: Invalid svn properties on file" error when trying to commit a new file via git-as-svn, you need:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Decide if this file is text or binary</p>
<div class="ulist">
<ul>
<li>
<p>If <strong>text</strong>, go to <code>.gitattributes</code> and add <code>text</code> entry for your file extension.
You may optionally want to specify <a href="https://git-scm.com/docs/gitattributes#_eol">EOL behavior</a>.</p>
</li>
<li>
<p>If <strong>binary</strong>, go to <code>.gitattributes</code> and add <code>-text</code> entry for your file extension</p>
</li>
</ul>
</div>
</li>
<li>
<p>Commit <code>.gitattributes</code></p>
</li>
<li>
<p><code>svn up</code> in working copy root</p>
</li>
<li>
<p><code>svn revert &lt;new file&gt;</code> (this will undo effect of <code>svn add</code>)</p>
</li>
<li>
<p><code>svn add &lt;new file&gt;</code> again</p>
</li>
<li>
<p>Finally, <code>svn commit</code></p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_emptydirs"><a class="anchor" href="#_emptydirs"></a><a class="link" href="#_emptydirs">11. Empty directories</a></h2>
<div class="sectionbody">
<div class="imageblock right">
<div class="content">
<a class="image" href="https://github.com/git-as-svn/git-as-svn/edit/master/src/docs/asciidoc/_emptydirs.adoc"><img src="https://img.shields.io/badge/improve-this%20doc-orange.svg" alt="improve this%20doc orange"></a>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This feature is not fully SVN-compatible.
Please, make sure you understand possible consequences of enabling it.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Unlike Subversion, Git doesn&#8217;t directly support empty directories.
However, this is an often-requested feature, so git-as-svn provides somewhat working emulation.</p>
</div>
<div class="paragraph">
<p>It has three modes of operation:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>emptyDirs: Disabled</code></dt>
<dd>
<p>Default, the safest mode.
git-as-svn rejects commits that try to create empty directories.</p>
</dd>
<dt class="hdlist1"><code>emptyDirs: AutoCreateKeepFile</code></dt>
<dd>
<p>When user tries to commit empty directory, git-as-svn automatically creates <code>.keep</code> file in it.</p>
<div class="paragraph">
<p>Note that if user makes a commit from a working copy, <code>.keep</code> file will not appear in it.
This limitation originates from Subversion commit protocol. It expects that items will be put in the repository exactly in the same state as user sent them.
So, if user commits empty directory, they expect the directory to be also empty on the server.</p>
</div>
<div class="paragraph">
<p>The only safe way to commit empty directories is when user doesn&#8217;t have a working copy but instead operates on remote repository URL directly.</p>
</div>
<div class="listingblock">
<div class="title">Safe</div>
<div class="content">
<pre class="rouge highlight"><code>$ svn mkdir svn://server/repo/dir</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Also safe</div>
<div class="content">
<pre class="rouge highlight"><code>$ svn co svn://server/repo
$ cd repo
$ svn svn://server/repo/dir
$ svn up # User gets directory and .keep file from server</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Unsafe</div>
<div class="content">
<pre class="rouge highlight"><code>$ svn co svn://server/repo
$ cd repo
$ mkdir dir
$ svn add dir
$ svn commit # Now user doesn't have .keep file but server does
$ svn up # User still doesn't have .keep file</code></pre>
</div>
</div>
<div class="paragraph">
<p>This discrepancy only affects the user who commits empty directory.
Other users will happily receive both directory and <code>.keep</code> file when they do <code>svn up</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>emptyDirs: AutoCreateAndDeleteKeepFile</code></dt>
<dd>
<p>Same as <code>emptyDirs: AutoCreateKeepFile</code> plus git-as-svn will automatically delete <code>.keep</code> file whenever directory becomes non-empty.</p>
<div class="paragraph">
<p>This mode allows even more scenarios that would lead to discrepancy between client and server understanding of repository structure.</p>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>So. You was warned. If your working copy becomes corrupt up to the point when you have to re-checkout it from the server due to messing with empty directories, you chose this.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comparison"><a class="anchor" href="#_comparison"></a><a class="link" href="#_comparison">12. Alternatives</a></h2>
<div class="sectionbody">
<div class="imageblock right">
<div class="content">
<a class="image" href="https://github.com/git-as-svn/git-as-svn/edit/master/src/docs/asciidoc/_alternatives.adoc"><img src="https://img.shields.io/badge/improve-this%20doc-orange.svg" alt="improve this%20doc orange"></a>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="diag-3b36b7644c5a90a40375843d0b6d6bcf.png" alt="Diagram" width="340" height="364">
</div>
</div>
<div class="paragraph">
<p>The problem of combining Git and Subversion work style with a version control system can be solved in different ways.</p>
</div>
<div class="sect2">
<h3 id="_github_subversion_support"><a class="anchor" href="#_github_subversion_support"></a><a class="link" href="#_github_subversion_support">12.1. GitHub Subversion support</a></h3>
<div class="imageblock">
<div class="content">
<img src="diag-1d5a79b5ff52bfef2b9e37e6df56287f.png" alt="Diagram" width="310" height="294">
</div>
</div>
<div class="paragraph">
<p>Website: <a href="https://help.github.com/en/articles/support-for-subversion-clients" class="bare">https://help.github.com/en/articles/support-for-subversion-clients</a></p>
</div>
<div class="paragraph">
<p>This is probably the closest analogue.</p>
</div>
<div class="paragraph">
<p>The main problem of this implementation is inseparable from GitHub.
Also, all of a sudden, this implementation does not support Git LFS.</p>
</div>
<div class="paragraph">
<p>In the case of GitHub it is also not clear where the stored mapping between Subversion-revision and Git-commit.
This can be a problem when restoring repositories after emergency situations.</p>
</div>
</div>
<div class="sect2">
<h3 id="_subgit"><a class="anchor" href="#_subgit"></a><a class="link" href="#_subgit">12.2. SubGit</a></h3>
<div class="imageblock">
<div class="content">
<img src="diag-42f46b7cc4a151ebfa543dd096ee34fd.png" alt="Diagram" width="420" height="252">
</div>
</div>
<div class="paragraph">
<p>Website: <a href="https://subgit.com" class="bare">https://subgit.com</a></p>
</div>
<div class="paragraph">
<p>Quite an interesting implementation which supports master-master replication with Git and Subversion repositories.
Thereby providing synchronization of repositories is not clear.</p>
</div>
</div>
<div class="sect2">
<h3 id="_subversion_repository_and_git_svn"><a class="anchor" href="#_subversion_repository_and_git_svn"></a><a class="link" href="#_subversion_repository_and_git_svn">12.3. Subversion repository and git-svn</a></h3>
<div class="imageblock">
<div class="content">
<img src="diag-42babdfc55173481269d78376a6dc762.png" alt="Diagram" width="310" height="266">
</div>
</div>
<div class="paragraph">
<p>This method allows you to use Git with Subversion repository, but using a shared Git repository between multiple developers very difficult.</p>
</div>
<div class="paragraph">
<p>At the same time, the developer has to use a specific command-line tool for working with the repository.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ssh"><a class="anchor" href="#_ssh"></a><a class="link" href="#_ssh">13. SVN+SSH</a></h2>
<div class="sectionbody">
<div class="imageblock right">
<div class="content">
<a class="image" href="https://github.com/git-as-svn/git-as-svn/edit/master/src/docs/asciidoc/_ssh.adoc"><img src="https://img.shields.io/badge/improve-this%20doc-orange.svg" alt="improve this%20doc orange"></a>
</div>
</div>
<div class="sect2">
<h3 id="_rationale"><a class="anchor" href="#_rationale"></a><a class="link" href="#_rationale">13.1. Rationale</a></h3>
<div class="paragraph">
<p>The SVN protocol is totally unencrypted, and due to the way git-as-svn has to proxy authentication through to git servers, almost all authentication happens in plaintext.</p>
</div>
<div class="paragraph">
<p>Clearly this is undesirable, not only is potentially private code exposed over the svn protocol, but so are passwords and usernames.</p>
</div>
<div class="paragraph">
<p>Traditionally SVN has two ways of preventing this:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use HTTPS</p>
</li>
<li>
<p>Use svn+ssh</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The HTTP protocol is substantially different from the SVN protocol and is currently unimplemented in git-as-svn</p>
</div>
<div class="paragraph">
<p>Thus leaving the svn+ssh mechanism.</p>
</div>
</div>
<div class="sect2">
<h3 id="_how_does_svnssh_work"><a class="anchor" href="#_how_does_svnssh_work"></a><a class="link" href="#_how_does_svnssh_work">13.2. How does SVN+SSH work?</a></h3>
<div class="paragraph">
<p>Normally when a client calls <code>svn &lt;command&gt; svn://host/path</code>, for an appropriate <code>&lt;command&gt;</code>, the subversion client will open a connection to the <code>host</code> server on port 3690. After an initial handshake as per the SVN protocol the server will ask the client to authenticate.</p>
</div>
<div class="paragraph">
<p>If possible the client will attempt to perform its actions anonymously, and if necessary the server will then ask for reauthentication.</p>
</div>
<div class="paragraph">
<p>If a client calls <code>svn &lt;command&gt; svn+ssh//username@host/path</code>, the subversion client will internally ask ssh to open connection using something equivalent to: <code>ssh username@host "svnserve -t"</code>.</p>
</div>
<div class="paragraph">
<p>If ssh succesfully connects, the SSH will run <code>svnserve -t</code> on the host, which will then proceed with the SVN protocol handshake over its <code>stdin</code>
and <code>stdout</code>, and the client will use the <code>stdin</code> and <code>stdout</code> of the ssh connection.</p>
</div>
<div class="paragraph">
<p>When the server asks the client to authenticate, the server will offer the <code>EXTERNAL</code> authentication mechanism.
(Possibly with the <code>ANONYMOUS</code>
mechanism.)</p>
</div>
<div class="paragraph">
<p>If the client uses <code>EXTERNAL</code> mechanism, the server sets the user to be either the currently logged in user from the ssh, (or an optional tunnel-user parameter.)</p>
</div>
<div class="paragraph">
<p>Securing the <code>svnserve -t</code> call and protecting against semi-malicious uses of the <code>--tunnel-user</code> option or even the calling of other commands in cases of multiple users for a single repository requires some thought.</p>
</div>
<div class="paragraph">
<p>Often this is protected through the use of a suitable <code>command=""</code>
parameter in the <code>authorized_keys</code> file, coupled with other options.
e.g.</p>
</div>
<div class="paragraph">
<p><code>command="/usr/bin/svnserve -t --tunnel-user username",no-port-forwarding,no-X11-forwarding,no-agent-forwarding,no-pty ssh-rsa &#8230;&#8203;</code></p>
</div>
<div class="paragraph">
<p>Of note, in this example the command provided by the client is ignored but it could be checked and managed as appropriately.
In fact these techniques are used in the <code>authorized_keys</code> files of most <code>git</code>
servers.</p>
</div>
<div class="paragraph">
<p>This provides a simple first way to handle <code>svn+ssh</code>, if we set
<code>command="nc localhost 3690"</code> then whenever we connect by ssh we will be passed directly to the git-as-svn server.
The downside being that the client will be asked to authenticate.</p>
</div>
</div>
<div class="sect2">
<h3 id="_a_better_git_as_svn_svnserve"><a class="anchor" href="#_a_better_git_as_svn_svnserve"></a><a class="link" href="#_a_better_git_as_svn_svnserve">13.3. A better <code>git-as-svn-svnserve</code></a></h3>
<div class="paragraph">
<p>Handling the <code>EXTERNAL</code> authentication mechanism properly without creating a new port to listen on and a new adjusted SVN protocol is not possible.</p>
</div>
<div class="paragraph">
<p>However there is another way:</p>
</div>
<div class="paragraph">
<p>We can stand in the middle of the SVN protocol stream, catch the authentication handshake, proxy it before stepping back and letting the client and server talk to each other.</p>
</div>
<div class="paragraph">
<p>We can create a new authentication mechanism on the <code>git-as-svn</code> server that requires a secret token known only by us, to allow us to pass in the external username (or other identifier) as the user authentication using <code>sshKeyUsers</code> to proxy the <code>UserDB</code></p>
</div>
<div class="paragraph">
<p>We can then use <code>git-as-svn-svnserve-tunnel SECRET EXTERNAL_USERNAME</code> as a replacement for <code>svnserve -t</code> or <code>nc localhost 3690</code> in the
<code>command=""</code> option in authorized_keys.</p>
</div>
<div class="paragraph">
<p>Of course we need to keep the <code>authorized_keys</code> file up-to-date</p>
</div>
</div>
<div class="sect2">
<h3 id="_gitlab_git_as_svn_svnserve"><a class="anchor" href="#_gitlab_git_as_svn_svnserve"></a><a class="link" href="#_gitlab_git_as_svn_svnserve">13.4. GitLab &amp; git-as-svn-svnserve</a></h3>
<div class="paragraph">
<p>There are two ways that Gitlab manages ssh access.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Updating the git user&#8217;s <code>authorized_keys</code> every time a SSH key is changed.</p>
</li>
<li>
<p>The use of an SSH <code>AuthorizedKeysCommand</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>First, let&#8217;s look at the <code>authorized_keys</code> case.</p>
</div>
<div class="paragraph">
<p>Gitlab will update the <code>authorized_keys</code> file over time.</p>
</div>
<div class="paragraph">
<p>If you set the option: <code>gitlab_shell['auth_file']</code> in the <code>gitlab.rb</code>
configuration file to a different location, you can catch changes to this file, and change the <code>command=""</code> option to something that will check whether we are trying to perform svn and handle it if so.</p>
</div>
<div class="paragraph">
<p>The suggested config, at least for Gitlab docker and assuming that git-as-svn has been installed in <code>/opt/git-as-svn</code> is:</p>
</div>
<div class="listingblock">
<div class="title">/etc/gitlab/gitlab.rb</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="ruby"><span class="c1"># gitlab_shell['auth_file'] = "/var/opt/gitlab/.ssh/authorized_keys"</span>
<span class="n">gitlab_shell</span><span class="p">[</span><span class="s1">'auth_file'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"/var/opt/gitlab/ssh-shadow/authorized_keys"</span></code></pre>
</div>
</div>
<details>
<summary class="title">/etc/git-as-svn/git-as-svn.conf</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="kt">!config:</span>

<span class="c1"># Specifies IP to listen to for svn:// connections</span>
<span class="c1"># Default: 0.0.0.0</span>
<span class="c1">#</span>
<span class="c1"># host: 0.0.0.0</span>

<span class="c1"># Specifies port number to listen to for svn:// connections</span>
<span class="c1"># Default: 3690</span>
<span class="c1">#</span>
<span class="c1"># port: 3690</span>

<span class="c1"># Subversion realm name. Subversion uses this for credentials caching</span>
<span class="c1"># Default: git-as-svn realm</span>
<span class="c1">#</span>
<span class="c1"># realm: git-as-svn realm</span>

<span class="c1"># Traffic compression level. Supported values: LZ4, Zlib, None</span>
<span class="c1"># Default: LZ4</span>
<span class="c1">#</span>
<span class="c1"># compressionLevel: LZ4</span>

<span class="c1"># If enabled, git-as-svn indexed repositories in parallel during startup</span>
<span class="c1"># This results in higher memory usage so may require adjustments to JVM memory options</span>
<span class="c1"># Default: true</span>
<span class="c1">#</span>
<span class="c1"># parallelIndexing: true</span>

<span class="c1"># Sets cache location</span>
<span class="na">cacheConfig</span><span class="pi">:</span> <span class="kt">!persistentCache</span>
  <span class="na">path</span><span class="pi">:</span> <span class="s">/var/cache/git-as-svn/git-as-svn.mapdb</span>

<span class="c1"># Tells git-as-svn to use GitLab API for repository list</span>
<span class="na">repositoryMapping</span><span class="pi">:</span> <span class="kt">!gitlabMapping</span>

  <span class="c1"># Filesystem location where GitLab stores repositories</span>
  <span class="c1"># Note that git-as-svn requires write access</span>
  <span class="c1"># Default: /var/opt/gitlab/git-data/repositories/</span>
  <span class="c1">#</span>
  <span class="c1"># path: /var/opt/gitlab/git-data/repositories/</span>

  <span class="c1"># Uncomment following to only handle repositories with specified tags (add them to repositories via Settings -&gt; General -&gt; Tags in GitLab)</span>
  <span class="c1">#</span>
  <span class="c1"># repositoryTags:</span>
  <span class="c1">#   - git-as-svn</span>

  <span class="c1"># Common settings for all repositories exposed to svn://</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="c1"># renameDetection: true</span>
    <span class="c1"># emptyDirs: Disabled</span>
    <span class="c1"># format: Latest</span>
    <span class="na">pusher</span><span class="pi">:</span> <span class="kt">!pushEmbedded</span>
      <span class="c1"># This tells git-as-svn where GitLab commit hooks are located</span>
      <span class="na">hooksPath</span><span class="pi">:</span> <span class="s">/opt/gitlab/embedded/service/gitaly-ruby/git-hooks</span>

<span class="c1"># Use GitLab user database</span>
<span class="na">userDB</span><span class="pi">:</span>
  <span class="kt">!sshKeyUsers</span>
  <span class="na">userDB</span><span class="pi">:</span> <span class="kt">!gitlabUsers</span> <span class="pi">{</span>
    <span class="c1"># Users can either authenticate using their GitLab login+password or login+access token</span>
    <span class="c1"># Possible values: Password, AccessToken</span>
    <span class="c1"># Default: Password</span>
    <span class="c1">#</span>
    <span class="c1"># authentication: Password</span>
  <span class="pi">}</span>
  <span class="na">sshKeysToken</span><span class="pi">:</span> <span class="s">CHANGE_THIS_TO_SOMETHING_SECRET</span>

<span class="na">shared</span><span class="pi">:</span>

  <span class="c1"># git-as-svn builtin web server</span>
  <span class="c1"># It is used for GitLab system hook for repository creation/deletion notifications</span>
  <span class="c1"># Also, git-as-svn builtin LFS server is served through it</span>
  <span class="pi">-</span> <span class="kt">!web</span>

    <span class="c1"># git-as-svn base url. Leave empty for autodetect.</span>
    <span class="c1"># Default: empty</span>
    <span class="c1">#</span>
    <span class="c1"># baseUrl: http://localhost:8123/</span>

    <span class="na">listen</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="kt">!http</span> <span class="pi">{</span>

        <span class="c1"># The network interface where git-as-svn web server binds to as an IP address or a hostname.  If 0.0.0.0, then bind to all interfaces.</span>
        <span class="c1"># Default: localhost</span>
        <span class="c1">#</span>
        <span class="c1"># host: localhost</span>

        <span class="c1"># Port where git-as-svn web server listens on.</span>
        <span class="c1"># Default: 8123</span>
        <span class="c1">#</span>
        <span class="c1"># port: 8123</span>

        <span class="c1"># HTTP idle timeout milliseconds. If not a single byte is sent or received over HTTP connection, git-as-svn closes it.</span>
        <span class="c1"># -1 = Use Jetty default</span>
        <span class="c1"># 0 = Disable timeout</span>
        <span class="c1"># Default: -1</span>
        <span class="c1">#</span>
        <span class="c1"># idleTimeout: -1</span>

        <span class="c1"># Tells git-as-svn to handle X-Forwarded-* headers.</span>
        <span class="c1"># Enable this if git-as-svn web server is running behind reverse HTTP proxy (like nginx)</span>
        <span class="c1"># Default: false</span>
        <span class="c1">#</span>
        <span class="c1"># forwarded: false</span>
      <span class="pi">}</span>

  <span class="c1"># Configures GitLab access for git-as-svn</span>
  <span class="pi">-</span> <span class="kt">!gitlab</span>

    <span class="c1"># GitLab base URL</span>
    <span class="c1"># Default: http://localhost/</span>
    <span class="c1">#</span>
    <span class="c1"># url: http://localhost/</span>

    <span class="c1"># Tells git-as-svn to use GitLab for LFS objects and file locking</span>
    <span class="c1"># Default: !httpLfs {}</span>
    <span class="c1">#</span>
    <span class="na">lfsMode</span><span class="pi">:</span> <span class="kt">!fileLfs</span>
      <span class="c1"># Directory where GitLab stores LFS ojects</span>
      <span class="na">path</span><span class="pi">:</span> <span class="s">/var/opt/gitlab/gitlab-rails/shared/lfs-objects</span>

    <span class="c1"># GitLab access token. Note that git-as-svn requires sudo access.</span>
    <span class="na">token</span><span class="pi">:</span> <span class="s">&lt;GitLab Access Token&gt;</span>

    <span class="c1"># Path to Gitaly socket file</span>
    <span class="c1"># You normally do not need to change it</span>
    <span class="c1"># Default: /var/opt/gitlab/gitaly/gitaly.socket</span>
    <span class="c1">#</span>
    <span class="c1"># gitalySocket: /var/opt/gitlab/gitaly/gitaly.socket</span>

    <span class="c1"># Gitaly secret token</span>
    <span class="c1"># This must match gitaly_token in /etc/gitlab/gitlab.rb</span>
    <span class="c1"># You normally do not need to change it</span>
    <span class="c1"># Default: secret token</span>
    <span class="c1">#</span>
    <span class="c1"># gitalyToken: secret token</span>

    <span class="c1"># Path to Gitaly binaries dir</span>
    <span class="c1"># You normally do not need to change it</span>
    <span class="c1"># Default: /opt/gitlab/embedded/bin</span>
    <span class="c1">#</span>
    <span class="c1"># gitalyBinDir: /opt/gitlab/embedded/bin</span>

    <span class="c1"># Value for GL_PROTOCOL hooks environment variable</span>
    <span class="c1"># See https://docs.gitlab.com/ee/administration/server_hooks.html#environment-variables-available-to-server-hooks</span>
    <span class="c1"># Possible values: HTTP, SSH, Web</span>
    <span class="c1"># Default: Web</span>
    <span class="c1">#</span>
    <span class="c1"># glProtocol: Web</span>

  <span class="c1"># Manage authorized_keys if your Gitlab instance creates this file</span>
  <span class="pi">-</span> <span class="kt">!sshKeys</span>
    <span class="na">shadowSSHDirectory</span><span class="pi">:</span> <span class="s">/var/opt/gitlab/ssh-shadow</span>
    <span class="na">realSSHDirectory</span><span class="pi">:</span> <span class="s">/var/opt/gitlab/.ssh</span>
    <span class="na">originalAppPath</span><span class="pi">:</span> <span class="s">/opt/gitlab/embedded/service/gitlab-shell/bin/gitlab-shell</span>
    <span class="na">svnservePath</span><span class="pi">:</span> <span class="s">/opt/git-as-svn/bin/git-as-svn-svnserve</span>
  <span class="c1"># If your gitlab instance is using AuthorizedKeysCommand</span>
  <span class="c1"># look at tools/git-as-svn-authorized-keys-command</span></code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">/opt/git-as-svn/bin/git-as-svn-svnserve</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="c">#!/bin/bash</span>

<span class="c">############################################################</span>
<span class="c"># git-as-svn-svnserve</span>
<span class="c">#</span>
<span class="c"># Shadow the default gitlab/gitea shell and allow svnserve</span>
<span class="c">############################################################</span>

<span class="c">############################################################</span>
<span class="c"># For Gitlab Docker:</span>
<span class="c">############################################################</span>
<span class="c"># SHADOW_SHELL_PATH="/opt/gitlab/embedded/service/gitlab-shell/bin/gitlab-shell"</span>
<span class="c"># TUNNEL_PATH="/opt/git-as-svn/bin/git-as-svn-svnserve-tunnel"</span>
<span class="c"># KEY="$1"</span>
<span class="c"># REAL_SHELL_PATH="$SHADOW_SHELL_PATH"</span>

<span class="c">############################################################</span>
<span class="c"># For Gitea Docker:</span>
<span class="c">############################################################</span>
<span class="nv">SHADOW_SHELL_PATH</span><span class="o">=</span><span class="s2">"/app/gitea/gitea"</span>
<span class="nv">TUNNEL_PATH</span><span class="o">=</span><span class="s2">"/app/git-as-svn/git-as-svn-svnserve-tunnel"</span>
<span class="nv">KEY</span><span class="o">=</span><span class="s2">"</span><span class="nv">$2</span><span class="s2">"</span>
<span class="nv">SUBCOMMAND</span><span class="o">=</span><span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span>
<span class="nv">REAL_SHELL_PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$SHADOW_SHELL_PATH</span><span class="s2">"</span>

<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$SUBCOMMAND</span><span class="s2">"</span> <span class="o">!=</span> <span class="s2">"serv"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">exec</span> <span class="nt">-a</span> <span class="s2">"</span><span class="nv">$REAL_SHELL_PATH</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$SHADOW_SHELL_PATH</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$@</span><span class="s2">"</span>
<span class="k">fi</span>

<span class="c">############################################################</span>
<span class="c"># Other options:</span>
<span class="c">############################################################</span>
<span class="c"># For either, you can move the shadowed binary to something like </span>
<span class="c"># /app/gitea/gitea.shadow and rename this script to /app/gitea/gitea.</span>
<span class="c"># </span>
<span class="c"># If you follow his approach you do not need to rewrite the</span>
<span class="c"># authorized_keys file, but may still need to process it.</span>
<span class="c">#</span>
<span class="c"># You would need to set the REAL_SHELL_PATH to point to this file</span>
<span class="c"># and restore the shadowing on updates to the application</span>
<span class="c">############################################################</span>
<span class="nv">SECRET</span><span class="o">=</span><span class="s2">"CHANGE_THIS_TO_SOMETHING_SECRET"</span>

<span class="nv">SSH_ORIGINAL_COMMANDS</span><span class="o">=(</span><span class="nv">$SSH_ORIGINAL_COMMAND</span><span class="o">)</span>

<span class="k">if</span> <span class="o">[</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$SSH_ORIGINAL_COMMAND</span><span class="s2">"</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="o">[</span> <span class="s2">"</span><span class="k">${</span><span class="nv">SSH_ORIGINAL_COMMANDS</span><span class="p">[0]</span><span class="k">}</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"svnserve"</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
    <span class="c">## TUNNEL TO OUR SVNSERVER WITH MAGIC AUTHENTICATION ##</span>
    <span class="nb">exec</span> <span class="s2">"</span><span class="nv">$TUNNEL_PATH</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$SECRET</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$KEY</span><span class="s2">"</span>
<span class="k">else
    </span><span class="nb">exec</span> <span class="nt">-a</span> <span class="s2">"</span><span class="nv">$REAL_SHELL_PATH</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$SHADOW_SHELL_PATH</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$@</span><span class="s2">"</span>
<span class="k">fi</span></code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">/opt/git-as-svn/bin/git-as-svn-svnserve-tunnel</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="c">#!/bin/bash</span>

<span class="c">############################################################</span>
<span class="c"># git-as-svn-svnserve-tunnel</span>
<span class="c">#</span>
<span class="c"># Use a bit of bash hackery to implement svnserve -t by</span>
<span class="c"># pushing stdin to the svn port (3690) but hijack the </span>
<span class="c"># authentication phase to pass in the ssh key id</span>
<span class="c">############################################################</span>

<span class="nv">SECRET</span><span class="o">=</span><span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span>
<span class="nv">KEY</span><span class="o">=</span><span class="s2">"</span><span class="nv">$2</span><span class="s2">"</span>
<span class="nv">FAKE_AUTH</span><span class="o">=</span><span class="s2">"( success ( ( EXTERNAL ) 16:Git-as-svn Realm ) )"</span>

<span class="k">function </span>failed <span class="o">{</span>
    <span class="nb">echo</span> <span class="s2">"</span><span class="nv">$0</span><span class="s2">: Unable to connect to svn service! Is it running?"</span> 1&gt;&amp;2
    <span class="nb">exit</span>
<span class="o">}</span>
<span class="nb">trap </span>failed err

<span class="nv">OUR_PID</span><span class="o">=</span><span class="nv">$$</span>
<span class="k">function </span>finish <span class="o">{</span>
    pkill <span class="nt">-P</span> <span class="nv">$OUR_PID</span>
    <span class="nb">exec </span>3&gt;&amp;- 3&lt;&amp;-
<span class="o">}</span>
<span class="nb">trap </span>finish EXIT

<span class="nb">exec </span>3&lt;<span class="o">&gt;</span>/dev/tcp/localhost/3690

<span class="nb">trap </span>finish err

<span class="k">function </span>read_bracket <span class="o">{</span>
    <span class="nv">BEEN_IN</span><span class="o">=</span><span class="nb">false
    </span><span class="nv">NBRACK</span><span class="o">=</span>0

    <span class="k">while</span> <span class="o">!</span> <span class="nv">$BEEN_IN</span> <span class="o">||</span> <span class="o">[</span> <span class="nv">$NBRACK</span> <span class="o">!=</span> 0 <span class="o">]</span><span class="p">;</span> <span class="k">do
        </span><span class="nv">IFS</span><span class="o">=</span> <span class="nb">read</span> <span class="nt">-n1</span> <span class="nt">-r</span> <span class="nt">-d</span> <span class="s1">''</span> FROM
        <span class="k">case</span> <span class="nv">$FROM</span> <span class="k">in</span>
            <span class="s1">'('</span><span class="p">)</span>
            <span class="nv">NBRACK</span><span class="o">=</span><span class="k">$((</span><span class="nv">$NBRACK</span> <span class="o">+</span> <span class="m">1</span><span class="k">))</span>
            <span class="nv">BEEN_IN</span><span class="o">=</span><span class="nb">true</span>
            <span class="p">;;</span>
            <span class="s1">')'</span><span class="p">)</span>
            <span class="nv">NBRACK</span><span class="o">=</span><span class="k">$((</span><span class="nv">$NBRACK</span> <span class="o">-</span> <span class="m">1</span><span class="k">))</span>
            <span class="p">;;</span>
            <span class="s1">''</span><span class="p">)</span>
            <span class="nb">break
        </span><span class="k">esac
        </span><span class="nb">echo</span> <span class="nt">-ne</span> <span class="s2">"</span><span class="nv">$FROM</span><span class="s2">"</span>
    <span class="k">done
    </span><span class="nv">IFS</span><span class="o">=</span> <span class="nb">read</span> <span class="nt">-n1</span> <span class="nt">-r</span> <span class="nt">-d</span> <span class="s1">''</span> FROM
    <span class="nb">echo</span> <span class="nt">-ne</span> <span class="s2">"</span><span class="nv">$FROM</span><span class="s2">"</span>
    <span class="k">if</span> <span class="o">[</span> <span class="s2">"X</span><span class="nv">$FROM</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"X"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
        </span><span class="nb">exec </span>0&lt;&amp;-
        <span class="nb">exit
    </span><span class="k">fi</span>
<span class="o">}</span>

<span class="c"># Send server capabilities to client</span>
read_bracket &lt;&amp;3 <span class="o">&gt;</span>&amp;1

<span class="c"># Send client capabilities to server</span>
read_bracket &lt;&amp;0 <span class="o">&gt;</span>&amp;3

<span class="c"># Get the server authentication</span>
<span class="nv">AUTH_LIST_FROM_SERV</span><span class="o">=</span><span class="si">$(</span>read_bracket &lt;&amp;3<span class="si">)</span>

<span class="c"># Send the server our information</span>
<span class="nv">AUTHBODY</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nt">-ne</span> <span class="s2">"</span><span class="se">\0</span><span class="nv">$SECRET</span><span class="se">\0</span><span class="nv">$KEY</span><span class="s2">"</span> | <span class="nb">base64</span><span class="si">)</span>
<span class="nv">AUTHBODY_LENGTH</span><span class="o">=</span><span class="k">${#</span><span class="nv">AUTHBODY</span><span class="k">}</span>
<span class="nb">echo</span> <span class="s2">"( KEY-AUTHENTICATOR ( </span><span class="nv">$AUTHBODY_LENGTH</span><span class="s2">:</span><span class="nv">$AUTHBODY</span><span class="s2"> ) )"</span> <span class="o">&gt;</span>&amp;3
<span class="k">if</span> <span class="o">!</span> <span class="o">{</span> <span class="nb">command</span> <span class="o">&gt;</span>&amp;3<span class="p">;</span> <span class="o">}</span> 2&gt;/dev/null<span class="p">;</span> <span class="k">then
    </span><span class="nb">exit
</span><span class="k">fi</span>

<span class="c"># send the fake auth list to the client</span>
<span class="nb">echo</span> <span class="s2">"</span><span class="nv">$FAKE_AUTH</span><span class="s2">"</span> <span class="o">&gt;</span>&amp;1
<span class="k">if</span> <span class="o">!</span> <span class="o">{</span> <span class="nb">command</span> <span class="o">&gt;</span>&amp;1<span class="p">;</span> <span class="o">}</span> 2&gt;/dev/null<span class="p">;</span> <span class="k">then
    </span><span class="nb">exit
</span><span class="k">fi</span>

<span class="c"># throwaway the client's response</span>
read_bracket &lt;&amp;0 <span class="o">&gt;</span> /dev/null

<span class="c"># THEN PRETEND THAT THE REST OF IT WENT THAT WAY</span>
<span class="o">(</span>
    <span class="nb">cat</span> &lt;&amp;3 <span class="o">&gt;</span>&amp;1 &amp;
    <span class="nv">CAT_PID</span><span class="o">=</span><span class="nv">$!</span>
    <span class="k">function </span>on_exit <span class="o">{</span>
        <span class="nb">kill</span> <span class="nv">$CAT_PID</span>
    <span class="o">}</span>
    <span class="nb">trap </span>on_exit EXIT
    <span class="nb">wait
    kill</span> <span class="nv">$OUR_PID</span>
<span class="o">)</span> &amp;

<span class="nb">cat</span> &lt;&amp;0 <span class="o">&gt;</span>&amp;3
pkill <span class="nt">-P</span> <span class="nv">$OUR_PID</span></code></pre>
</div>
</div>
</div>
</details>
<div class="paragraph">
<p>In the second case, if we proxy the <code>AuthorizedKeysCommand</code>, and just replace the <code>command=""</code> option as above then we have a working solution.</p>
</div>
<div class="paragraph">
<p>We have two main options, we can keep the same user, e.g. <code>git</code> for both subversion and git, or we could create another user.</p>
</div>
<div class="paragraph">
<p>The first option requires that we proxy the original app and replace it with our own.
The second is similar but we leave the original response alone for git, just replacing it for svn</p>
</div>
<div class="paragraph">
<p>The first option is described below.</p>
</div>
<details>
<summary class="title">/assets/sshd_config</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>...
# AuthorizedKeysCommand /opt/gitlab/embedded/service/gitlab-shell/bin/gitlab-shell-authorized-keys-check git %u %k
# AuthorizedKeysCommandUser git
AuthorizedKeysCommand /opt/git-as-svn/bin/git-as-svn-authorized-keys-command git %u %k
AuthorizedKeysCommandUser git
...</pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">/opt/git-as-svn/bin/git-as-svn-authorized-keys-command</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="c">#!/bin/bash</span>

<span class="c">############################################################</span>
<span class="c"># git-as-svn-authorized-keys_command</span>
<span class="c">#</span>
<span class="c"># Shadow the default ssh AuthorizedKeysComand and adjust its</span>
<span class="c"># output to replace the original command with our svnserve</span>
<span class="c">############################################################</span>

<span class="c">############################################################</span>
<span class="c"># For Gitlab Docker:</span>
<span class="c">############################################################</span>
<span class="nv">ORIGINAL_AUTHORIZED_COMMAND</span><span class="o">=</span><span class="s2">"/opt/gitlab/embedded/service/gitlab-shell/bin/gitlab-shell-authorized-keys-check"</span>
<span class="nv">ORIGINAL_APP_PATH</span><span class="o">=</span><span class="s2">"/opt/gitlab/embedded/service/gitlab-shell/bin/gitlab-shell"</span>
<span class="nv">SVN_SERVE_PATH</span><span class="o">=</span><span class="s2">"/opt/git-as-svn/bin/git-as-svn-svnserve"</span>

<span class="c">############################################################</span>
<span class="c"># Gitea does not have AuthorizedKeysCommand at present</span>
<span class="c">############################################################</span>

<span class="nb">exec</span> <span class="nt">-a</span> <span class="s2">"</span><span class="nv">$ORIGINAL_AUTHORIZED_COMMAND</span><span class="s2">"</span>  <span class="s2">"</span><span class="nv">$ORIGINAL_AUTHORIZED_COMMAND</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$@</span><span class="s2">"</span> | <span class="nb">sed</span> <span class="nt">-e</span> <span class="s1">'s|command="'</span><span class="s2">"</span><span class="nv">$ORIGINAL_APP_PATH</span><span class="s2">"</span><span class="s1">'|command="'</span><span class="s2">"</span><span class="nv">$SVN_SERVE_PATH</span><span class="s2">"</span><span class="s1">'|'</span></code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">/etc/git-as-svn/git-as-svn.conf</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="kt">!config:</span>

<span class="c1"># Specifies IP to listen to for svn:// connections</span>
<span class="c1"># Default: 0.0.0.0</span>
<span class="c1">#</span>
<span class="c1"># host: 0.0.0.0</span>

<span class="c1"># Specifies port number to listen to for svn:// connections</span>
<span class="c1"># Default: 3690</span>
<span class="c1">#</span>
<span class="c1"># port: 3690</span>

<span class="c1"># Subversion realm name. Subversion uses this for credentials caching</span>
<span class="c1"># Default: git-as-svn realm</span>
<span class="c1">#</span>
<span class="c1"># realm: git-as-svn realm</span>

<span class="c1"># Traffic compression level. Supported values: LZ4, Zlib, None</span>
<span class="c1"># Default: LZ4</span>
<span class="c1">#</span>
<span class="c1"># compressionLevel: LZ4</span>

<span class="c1"># If enabled, git-as-svn indexed repositories in parallel during startup</span>
<span class="c1"># This results in higher memory usage so may require adjustments to JVM memory options</span>
<span class="c1"># Default: true</span>
<span class="c1">#</span>
<span class="c1"># parallelIndexing: true</span>

<span class="c1"># Sets cache location</span>
<span class="na">cacheConfig</span><span class="pi">:</span> <span class="kt">!persistentCache</span>
  <span class="na">path</span><span class="pi">:</span> <span class="s">/var/cache/git-as-svn/git-as-svn.mapdb</span>

<span class="c1"># Tells git-as-svn to use GitLab API for repository list</span>
<span class="na">repositoryMapping</span><span class="pi">:</span> <span class="kt">!gitlabMapping</span>

  <span class="c1"># Filesystem location where GitLab stores repositories</span>
  <span class="c1"># Note that git-as-svn requires write access</span>
  <span class="c1"># You normally do not need to change it</span>
  <span class="c1"># Default: /var/opt/gitlab/git-data/repositories/</span>
  <span class="c1">#</span>
  <span class="c1"># path: /var/opt/gitlab/git-data/repositories/</span>

  <span class="c1"># Common settings for all repositories exposed to svn://</span>
  <span class="c1">#</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="c1"># renameDetection: true</span>
    <span class="c1"># emptyDirs: Disabled</span>
    <span class="c1"># format: Latest</span>
    <span class="na">pusher</span><span class="pi">:</span> <span class="kt">!pushEmbedded</span>
      <span class="c1"># This tells git-as-svn where GitLab commit hooks are located</span>
      <span class="na">hooksPath</span><span class="pi">:</span> <span class="s">/opt/gitlab/embedded/service/gitaly-ruby/git-hooks</span>

<span class="c1"># Tells git-as-svn to authenticate users against GitLab</span>
<span class="na">userDB</span><span class="pi">:</span> <span class="kt">!gitlabUsers</span> <span class="pi">{</span>
  <span class="c1"># Users can either authenticate using their GitLab login+password or login+access token</span>
  <span class="c1"># Possible values: Password, AccessToken</span>
  <span class="c1"># Default: Password</span>
  <span class="c1">#</span>
  <span class="c1"># authentication: Password</span>
<span class="pi">}</span>

<span class="na">shared</span><span class="pi">:</span>

  <span class="c1"># git-as-svn builtin web server</span>
  <span class="c1"># It is used for GitLab system hook for repository creation/deletion notifications</span>
  <span class="c1"># Also, git-as-svn builtin LFS server is served through it</span>
  <span class="pi">-</span> <span class="kt">!web</span>

    <span class="c1"># git-as-svn base url. Leave empty for autodetect.</span>
    <span class="c1"># Default: empty</span>
    <span class="c1">#</span>
    <span class="c1"># baseUrl: http://localhost:8123/</span>

    <span class="na">listen</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="kt">!http</span> <span class="pi">{</span>

        <span class="c1"># The network interface where git-as-svn web server binds to as an IP address or a hostname.  If 0.0.0.0, then bind to all interfaces.</span>
        <span class="c1"># Default: localhost</span>
        <span class="c1">#</span>
        <span class="c1"># host: localhost</span>

        <span class="c1"># Port where git-as-svn web server listens on.</span>
        <span class="c1"># Default: 8123</span>
        <span class="c1">#</span>
        <span class="c1"># port: 8123</span>

        <span class="c1"># HTTP idle timeout milliseconds. If not a single byte is sent or received over HTTP connection, git-as-svn closes it.</span>
        <span class="c1"># -1 = Use Jetty default</span>
        <span class="c1"># 0 = Disable timeout</span>
        <span class="c1"># Default: -1</span>
        <span class="c1">#</span>
        <span class="c1"># idleTimeout: -1</span>

        <span class="c1"># Tells git-as-svn to handle X-Forwarded-* headers.</span>
        <span class="c1"># Enable this if git-as-svn web server is running behind reverse HTTP proxy (like nginx)</span>
        <span class="c1"># Default: false</span>
        <span class="c1">#</span>
        <span class="c1"># forwarded: false</span>
      <span class="pi">}</span>

  <span class="c1"># Configures GitLab access for git-as-svn</span>
  <span class="pi">-</span> <span class="kt">!gitlab</span>

    <span class="c1"># GitLab base URL</span>
    <span class="c1"># Default: http://localhost/</span>
    <span class="c1">#</span>
    <span class="c1"># url: http://localhost/</span>

    <span class="c1"># Tells git-as-svn to use GitLab for LFS objects and file locking</span>
    <span class="c1"># Default: !httpLfs {}</span>
    <span class="c1">#</span>
    <span class="na">lfsMode</span><span class="pi">:</span> <span class="kt">!fileLfs</span>
      <span class="c1"># Directory where GitLab stores LFS ojects</span>
      <span class="na">path</span><span class="pi">:</span> <span class="s">/var/opt/gitlab/gitlab-rails/shared/lfs-objects</span>

    <span class="c1"># GitLab access token</span>
    <span class="c1"># Note that git-as-svn requires sudo access</span>
    <span class="na">token</span><span class="pi">:</span> <span class="s">&lt;GitLab Access Token&gt;</span>

    <span class="c1"># Path to Gitaly socket file</span>
    <span class="c1"># You normally do not need to change it</span>
    <span class="c1"># Default: /var/opt/gitlab/gitaly/gitaly.socket</span>
    <span class="c1">#</span>
    <span class="c1"># gitalySocket: /var/opt/gitlab/gitaly/gitaly.socket</span>

    <span class="c1"># Gitaly secret token</span>
    <span class="c1"># This must match gitaly_token in /etc/gitlab/gitlab.rb</span>
    <span class="c1"># You normally do not need to change it</span>
    <span class="c1"># Default: secret token</span>
    <span class="c1">#</span>
    <span class="c1"># gitalyToken: secret token</span>

    <span class="c1"># Path to Gitaly binaries dir</span>
    <span class="c1"># You normally do not need to change it</span>
    <span class="c1"># Default: /opt/gitlab/embedded/bin</span>
    <span class="c1">#</span>
    <span class="c1"># gitalyBinDir: /opt/gitlab/embedded/bin</span>

    <span class="c1"># Value for GL_PROTOCOL hooks environment variable</span>
    <span class="c1"># See https://docs.gitlab.com/ee/administration/server_hooks.html#environment-variables-available-to-server-hooks</span>
    <span class="c1"># Possible values: HTTP, SSH, Web</span>
    <span class="c1"># Default: Web</span>
    <span class="c1">#</span>
    <span class="c1"># glProtocol: Web</span></code></pre>
</div>
</div>
</div>
</details>
<div class="ulist">
<ul>
<li>
<p><code>/opt/git-as-svn/bin/git-as-svn-svnserve</code> and <code>/opt/git-as-svn/bin/git-as-svn-svnserve-tunnel</code> same as above.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_gitea_2"><a class="anchor" href="#_gitea_2"></a><a class="link" href="#_gitea_2">13.5. Gitea</a></h3>
<div class="paragraph">
<p>There are two ways that Gitea manages ssh access.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If Gitea is deferring to an external SSHD. It will update the git user&#8217;s <code>authorized_keys</code> every time a SSH key is changed.</p>
</li>
<li>
<p>If Gitea is using its own internal SSHD. It will run the <code>gitea serv</code> command each time.</p>
</li>
<li>
<p>The use of an SSH <code>AuthorizedKeysCommand</code> in Gitea v1.7.0+</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>First, let&#8217;s look at the <code>authorized_keys</code> case.</p>
</div>
<div class="paragraph">
<p>Gitea will update the <code>authorized_keys</code> file over time.</p>
</div>
<div class="paragraph">
<p>If you set the option: <code>SSH_ROOT_PATH</code> in the <code>[server]</code> of the gitea <code>app.ini</code> to a shadow location you can catch changes to this file, and change the <code>command=""</code> option to something that will check whether we are trying to perform svn and handle it if so.</p>
</div>
<div class="paragraph">
<p>The suggested config, at least for Gitea docker, and assuming that git-as-svn has been installed in <code>/app/git-as-svn</code> is:</p>
</div>
<div class="listingblock">
<div class="title">/data/gitea/conf/app.ini</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="ini"><span class="err">...</span>
<span class="nn">[server]</span>
<span class="err">...</span>
<span class="py">SSH_ROOT_PATH</span><span class="p">=</span><span class="s">/data/git/ssh-shadow</span>
<span class="err">...</span></code></pre>
</div>
</div>
<details>
<summary class="title">/app/git-as-svn/config.yaml</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="kt">!config:</span>

<span class="c1"># Specifies IP to listen to for svn:// connections</span>
<span class="c1"># Default: 0.0.0.0</span>
<span class="c1">#</span>
<span class="c1"># host: 0.0.0.0</span>

<span class="c1"># Specifies port number to listen to for svn:// connections</span>
<span class="c1"># Default: 3690</span>
<span class="c1">#</span>
<span class="c1"># port: 3690</span>

<span class="c1"># Subversion realm name. Subversion uses this for credentials caching</span>
<span class="c1"># Default: git-as-svn realm</span>
<span class="c1">#</span>
<span class="c1"># realm: git-as-svn realm</span>

<span class="c1"># Traffic compression level. Supported values: LZ4, Zlib, None</span>
<span class="c1"># Default: LZ4</span>
<span class="c1">#</span>
<span class="c1"># compressionLevel: LZ4</span>

<span class="c1"># If enabled, git-as-svn indexed repositories in parallel during startup</span>
<span class="c1"># This results in higher memory usage so may require adjustments to JVM memory options</span>
<span class="c1"># Default: true</span>
<span class="c1">#</span>
<span class="c1"># parallelIndexing: true</span>

<span class="c1"># Sets cache location</span>
<span class="na">cacheConfig</span><span class="pi">:</span> <span class="kt">!persistentCache</span>
  <span class="na">path</span><span class="pi">:</span> <span class="s">/var/cache/git-as-svn/git-as-svn.mapdb</span>

<span class="c1"># Tells git-as-svn to use Gitea API for repository list</span>
<span class="na">repositoryMapping</span><span class="pi">:</span> <span class="kt">!giteaMapping</span>

  <span class="c1"># Filesystem location where Gitea stores repositories</span>
  <span class="c1"># Note that git-as-svn requires write access</span>
  <span class="na">path</span><span class="pi">:</span> <span class="s">/data/git/repositories</span>

  <span class="c1"># Common settings for all repositories exposed to svn://</span>
  <span class="c1">#</span>
  <span class="c1"># template:</span>
  <span class="c1">#   branches:</span>
  <span class="c1">#     - master</span>
  <span class="c1">#   renameDetection: true</span>
  <span class="c1">#   emptyDirs: Disabled</span>
  <span class="c1">#   format: Latest</span>

<span class="na">userDB</span><span class="pi">:</span>
  <span class="kt">!sshKeyUsers</span>
  <span class="c1"># Tells git-as-svn to use Gitea API for user authentication</span>
  <span class="na">userDB</span><span class="pi">:</span> <span class="kt">!giteaUsers</span> <span class="pi">{}</span>
  <span class="na">sshKeysToken</span><span class="pi">:</span> <span class="s">CHANGE_THIS_TO_SOMETHING_SECRET</span>

<span class="na">shared</span><span class="pi">:</span>

  <span class="c1"># Configures Gitea API for git-as-svn</span>
  <span class="pi">-</span> <span class="kt">!gitea</span>

    <span class="c1"># URL where your Gitea instance API is running</span>
    <span class="na">url</span><span class="pi">:</span> <span class="s">http://localhost:3000/api/v1</span>

    <span class="c1"># Tells git-as-svn to store Git-LFS objects through Gitea LFS API</span>
    <span class="c1"># Note that this needs to be in sync with Gitea LFS_START_SERVER config option</span>
    <span class="na">lfs</span><span class="pi">:</span> <span class="no">false</span>

    <span class="c1"># Gitea access token</span>
    <span class="c1"># Note that git-as-svn requires Gitea Sudo permission in order to authenticate users</span>
    <span class="na">token</span><span class="pi">:</span> <span class="s">90c68b84fb04e364c2ea3fc42a6a2193144bc07d</span>

  <span class="pi">-</span> <span class="kt">!sshKeys</span>
    <span class="na">shadowSSHDirectory</span><span class="pi">:</span> <span class="s">/data/git/ssh-shadow</span>
    <span class="na">realSSHDirectory</span><span class="pi">:</span> <span class="s">/data/git/.ssh</span>
    <span class="na">originalAppPath</span><span class="pi">:</span> <span class="s">/app/gitea/gitea</span>
    <span class="na">svnservePath</span><span class="pi">:</span> <span class="s">/app/gitea/git-as-svn-svnserve</span>
  <span class="c1"># If your gitea instance is using AuthorizedKeysCommand</span>
  <span class="c1"># look at tools/git-as-svn-authorized-keys-command</span>
  <span class="c1"># You don't need sshKeys in that case</span></code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">/app/git-as-svn/bin/git-as-svn-svnserve</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="c">#!/bin/bash</span>

<span class="c">############################################################</span>
<span class="c"># git-as-svn-svnserve</span>
<span class="c">#</span>
<span class="c"># Shadow the default gitlab/gitea shell and allow svnserve</span>
<span class="c">############################################################</span>

<span class="c">############################################################</span>
<span class="c"># For Gitlab Docker:</span>
<span class="c">############################################################</span>
<span class="c"># SHADOW_SHELL_PATH="/opt/gitlab/embedded/service/gitlab-shell/bin/gitlab-shell"</span>
<span class="c"># TUNNEL_PATH="/opt/git-as-svn/bin/git-as-svn-svnserve-tunnel"</span>
<span class="c"># KEY="$1"</span>
<span class="c"># REAL_SHELL_PATH="$SHADOW_SHELL_PATH"</span>

<span class="c">############################################################</span>
<span class="c"># For Gitea Docker:</span>
<span class="c">############################################################</span>
<span class="nv">SHADOW_SHELL_PATH</span><span class="o">=</span><span class="s2">"/app/gitea/gitea"</span>
<span class="nv">TUNNEL_PATH</span><span class="o">=</span><span class="s2">"/app/git-as-svn/git-as-svn-svnserve-tunnel"</span>
<span class="nv">KEY</span><span class="o">=</span><span class="s2">"</span><span class="nv">$2</span><span class="s2">"</span>
<span class="nv">SUBCOMMAND</span><span class="o">=</span><span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span>
<span class="nv">REAL_SHELL_PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$SHADOW_SHELL_PATH</span><span class="s2">"</span>

<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$SUBCOMMAND</span><span class="s2">"</span> <span class="o">!=</span> <span class="s2">"serv"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">exec</span> <span class="nt">-a</span> <span class="s2">"</span><span class="nv">$REAL_SHELL_PATH</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$SHADOW_SHELL_PATH</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$@</span><span class="s2">"</span>
<span class="k">fi</span>

<span class="c">############################################################</span>
<span class="c"># Other options:</span>
<span class="c">############################################################</span>
<span class="c"># For either, you can move the shadowed binary to something like </span>
<span class="c"># /app/gitea/gitea.shadow and rename this script to /app/gitea/gitea.</span>
<span class="c"># </span>
<span class="c"># If you follow his approach you do not need to rewrite the</span>
<span class="c"># authorized_keys file, but may still need to process it.</span>
<span class="c">#</span>
<span class="c"># You would need to set the REAL_SHELL_PATH to point to this file</span>
<span class="c"># and restore the shadowing on updates to the application</span>
<span class="c">############################################################</span>
<span class="nv">SECRET</span><span class="o">=</span><span class="s2">"CHANGE_THIS_TO_SOMETHING_SECRET"</span>

<span class="nv">SSH_ORIGINAL_COMMANDS</span><span class="o">=(</span><span class="nv">$SSH_ORIGINAL_COMMAND</span><span class="o">)</span>

<span class="k">if</span> <span class="o">[</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$SSH_ORIGINAL_COMMAND</span><span class="s2">"</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="o">[</span> <span class="s2">"</span><span class="k">${</span><span class="nv">SSH_ORIGINAL_COMMANDS</span><span class="p">[0]</span><span class="k">}</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"svnserve"</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
    <span class="c">## TUNNEL TO OUR SVNSERVER WITH MAGIC AUTHENTICATION ##</span>
    <span class="nb">exec</span> <span class="s2">"</span><span class="nv">$TUNNEL_PATH</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$SECRET</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$KEY</span><span class="s2">"</span>
<span class="k">else
    </span><span class="nb">exec</span> <span class="nt">-a</span> <span class="s2">"</span><span class="nv">$REAL_SHELL_PATH</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$SHADOW_SHELL_PATH</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$@</span><span class="s2">"</span>
<span class="k">fi</span></code></pre>
</div>
</div>
</div>
</details>
<div class="ulist">
<ul>
<li>
<p><code>/app/git-as-svn/bin/git-as-svn-svnserve-tunnel</code> should be the same as in the gitlab case.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For the second case, we need to shadow the gitea binary</p>
</div>
<div class="paragraph">
<p>So we would need to move the original gitea from <code>/app/gitea/gitea</code> to <code>/app/gitea/gitea.shadow</code></p>
</div>
<div class="paragraph">
<p>And either create <code>/app/gitea/gitea</code> as a symbolic link or just copy the below <code>/app/git-as-svn/bin/git-as-svn-svnserve</code> as it.</p>
</div>
<details>
<summary class="title">/app/git-as-svn/bin/git-as-svn-svnserve</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="c">#!/bin/bash</span>

<span class="c">############################################################</span>
<span class="c"># git-as-svn-svnserve</span>
<span class="c">#</span>
<span class="c"># Shadow the default gitlab/gitea shell and allow svnserve</span>
<span class="c">############################################################</span>

<span class="c">############################################################</span>
<span class="c"># For Gitlab Docker:</span>
<span class="c">############################################################</span>
<span class="c"># SHADOW_SHELL_PATH="/opt/gitlab/embedded/service/gitlab-shell/bin/gitlab-shell"</span>
<span class="c"># TUNNEL_PATH="/opt/git-as-svn/bin/git-as-svn-svnserve-tunnel"</span>
<span class="c"># KEY="$1"</span>
<span class="c"># REAL_SHELL_PATH="$SHADOW_SHELL_PATH"</span>

<span class="c">############################################################</span>
<span class="c"># For Gitea Docker:</span>
<span class="c">############################################################</span>
<span class="nv">SHADOW_SHELL_PATH</span><span class="o">=</span><span class="s2">"/app/gitea/gitea"</span>
<span class="nv">TUNNEL_PATH</span><span class="o">=</span><span class="s2">"/app/git-as-svn/git-as-svn-svnserve-tunnel"</span>
<span class="nv">KEY</span><span class="o">=</span><span class="s2">"</span><span class="nv">$2</span><span class="s2">"</span>
<span class="nv">SUBCOMMAND</span><span class="o">=</span><span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span>
<span class="nv">REAL_SHELL_PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$SHADOW_SHELL_PATH</span><span class="s2">"</span>

<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$SUBCOMMAND</span><span class="s2">"</span> <span class="o">!=</span> <span class="s2">"serv"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">exec</span> <span class="nt">-a</span> <span class="s2">"</span><span class="nv">$REAL_SHELL_PATH</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$SHADOW_SHELL_PATH</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$@</span><span class="s2">"</span>
<span class="k">fi</span>

<span class="c">############################################################</span>
<span class="c"># Other options:</span>
<span class="c">############################################################</span>
<span class="c"># For either, you can move the shadowed binary to something like </span>
<span class="c"># /app/gitea/gitea.shadow and rename this script to /app/gitea/gitea.</span>
<span class="c"># </span>
<span class="c"># If you follow his approach you do not need to rewrite the</span>
<span class="c"># authorized_keys file, but may still need to process it.</span>
<span class="c">#</span>
<span class="c"># You would need to set the REAL_SHELL_PATH to point to this file</span>
<span class="c"># and restore the shadowing on updates to the application</span>
<span class="c">############################################################</span>
<span class="nv">SECRET</span><span class="o">=</span><span class="s2">"CHANGE_THIS_TO_SOMETHING_SECRET"</span>

<span class="nv">SSH_ORIGINAL_COMMANDS</span><span class="o">=(</span><span class="nv">$SSH_ORIGINAL_COMMAND</span><span class="o">)</span>

<span class="k">if</span> <span class="o">[</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$SSH_ORIGINAL_COMMAND</span><span class="s2">"</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="o">[</span> <span class="s2">"</span><span class="k">${</span><span class="nv">SSH_ORIGINAL_COMMANDS</span><span class="p">[0]</span><span class="k">}</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"svnserve"</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
    <span class="c">## TUNNEL TO OUR SVNSERVER WITH MAGIC AUTHENTICATION ##</span>
    <span class="nb">exec</span> <span class="s2">"</span><span class="nv">$TUNNEL_PATH</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$SECRET</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$KEY</span><span class="s2">"</span>
<span class="k">else
    </span><span class="nb">exec</span> <span class="nt">-a</span> <span class="s2">"</span><span class="nv">$REAL_SHELL_PATH</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$SHADOW_SHELL_PATH</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$@</span><span class="s2">"</span>
<span class="k">fi</span></code></pre>
</div>
</div>
</div>
</details>
<div class="paragraph">
<p><code>/app/git-as-svn/bin/git-as-svn-svnserve-tunnel</code> should be the same as in the gitlab case.</p>
</div>
<div class="paragraph">
<p>Managing the <code>AuthorizedKeysCommand</code> is similar to that in the Gitlab case.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_internals"><a class="anchor" href="#_internals"></a><a class="link" href="#_internals">14. Internal implementation details</a></h2>
<div class="sectionbody">
<div class="imageblock right">
<div class="content">
<a class="image" href="https://github.com/git-as-svn/git-as-svn/edit/master/src/docs/asciidoc/_internals.adoc"><img src="https://img.shields.io/badge/improve-this%20doc-orange.svg" alt="improve this%20doc orange"></a>
</div>
</div>
<div class="sect2">
<h3 id="_where_subversion_data_is_stored"><a class="anchor" href="#_where_subversion_data_is_stored"></a><a class="link" href="#_where_subversion_data_is_stored">14.1. Where Subversion data is stored?</a></h3>
<div class="paragraph">
<p>To represent Subversion repository need to store information about how Subversion-revision number corresponds to which Git-commit.
We can&#8217;t compute this information every time on startup, because first <code>git push --force</code> change revision order.
This information stored persistent in git reference <code>refs/git-as-svn/*</code>.
In particular because it does not require a separate backup Subversion data.
Because of this separate backup Subversion data is not necessary.</p>
</div>
<div class="paragraph">
<p>Also part of the data necessary for the Subversion repository, is very expensive to get based on Git repository.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the revision number with the previous change file;</p>
</li>
<li>
<p>information about where the file was copied;</p>
</li>
<li>
<p>MD5 file hash.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In order not to find out their every startup, the data is cached in files.
The loss of the cache is not critical for the operation and backup does not make sense.</p>
</div>
<div class="paragraph">
<p>File locking information is currently stored in the cache file.</p>
</div>
</div>
<div class="sect2">
<h3 id="_описание_хранения_информации_в_хранилище"><a class="anchor" href="#_описание_хранения_информации_в_хранилище"></a><a class="link" href="#_описание_хранения_информации_в_хранилище">14.2. Описание хранения информации в хранилище</a></h3>

</div>
<div class="sect2">
<h3 id="_для_чего_нужно_хранилище"><a class="anchor" href="#_для_чего_нужно_хранилище"></a><a class="link" href="#_для_чего_нужно_хранилище">14.3. Для чего нужно хранилище</a></h3>
<div class="paragraph">
<p>Хранилище данных о ревизиях нужно для:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Сохранения информации об списке измененных файлов (в svn очень часто нужно выяснять, в какой из предыдущих ревизий поменялся файл);</p>
</li>
<li>
<p>Сохранения информации о том, к какой ревизии/ветке относится коммит;</p>
</li>
<li>
<p>Сохранения идентификатора svn-репозитория.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Так же побочным эффектом служит формирование дерева с svn layout-ом для более простой работы svn update/switch/log/diff и т.п.</p>
</div>
<div class="sect3">
<h4 id="_формат_хранения_информации_о_ревизиях"><a class="anchor" href="#_формат_хранения_информации_о_ревизиях"></a><a class="link" href="#_формат_хранения_информации_о_ревизиях">14.3.1. Формат хранения информации о ревизиях</a></h4>
<div class="paragraph">
<p>Для хранения информации о ревизиях используется ссылка <code>refs/git-as-svn/v1</code>.</p>
</div>
<div class="paragraph">
<p>Эта ссылка содержит в себе набор коммитов, выстроенных в цеполчку по первому родителю.
Порядковый номер коммита от начала соответвует номеру ревизии в SVN.</p>
</div>
<div class="sect4">
<h5 id="_содержимое_коммита"><a class="anchor" href="#_содержимое_коммита"></a><a class="link" href="#_содержимое_коммита">Содержимое коммита</a></h5>
<div class="paragraph">
<p>Данные самого коммита:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Первый родитель всегда ссылается на предыдущий коммит;</p>
</li>
<li>
<p>Комментарий коммита берется из оригинального коммита.
Именно этот комментарий выводится в svn log;</p>
</li>
<li>
<p>Автор коммита берется из оригинального коммита;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Дерево коммита:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>svn (tree) - дерево, которое соответсвует svn layout-у данного коммита;</p>
</li>
<li>
<p>commit.ref (commit) - ссылка на оригинальный коммит (для коммитов, которые связаны с удалением/созданием веток может отсутствовать);</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_revision_0"><a class="anchor" href="#_revision_0"></a><a class="link" href="#_revision_0">Revision 0</a></h5>
<div class="paragraph">
<p>Ревизия 0 несколько отличается от остальных коммитов.</p>
</div>
<div class="paragraph">
<p>В отличие от остальных коммитов:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Она всегда содержит путое дерево svn;</p>
</li>
<li>
<p>В ней лежит файл <code>uuid</code> с идентификатором репозитория.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_how_does_commit_work"><a class="anchor" href="#_how_does_commit_work"></a><a class="link" href="#_how_does_commit_work">14.4. How does commit work?</a></h3>
<div class="paragraph">
<p>One of the most important parts of the system — to save the changes.</p>
</div>
<div class="paragraph">
<p>In general, the following algorithm:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>At the moment the command <code>svn commit</code> client sends to the server of your changes.
The server remembers them.
At this point comes the first check the relevance of customer data.</p>
</li>
<li>
<p>The server takes the branch HEAD and begins to create new commit on the basis of client received delta.
At this moment there is yet another check of the relevance of customer data.</p>
</li>
<li>
<p>Validating svn properties for changed data.</p>
</li>
<li>
<p>The server tries to push the new commit in the current branch of the same repository via console Git client.
Next, the result of a push:</p>
<div class="ulist">
<ul>
<li>
<p>if commits pushed successfully — loading the latest changes from git commits and rejoice;</p>
</li>
<li>
<p>if push is not fast forward — load the latest changes from git commits and go to step 2;</p>
</li>
<li>
<p>if push declined by hooks — inform the client;</p>
</li>
<li>
<p>on another error — inform the client;</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Thus, through the use console Git client for push, we avoid the race condition pouring directly change Git repository, and get the native hooks as a nice bonus.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_changelog"><a class="anchor" href="#_changelog"></a><a class="link" href="#_changelog">15. Changelog</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_4_3_0"><a class="anchor" href="#_4_3_0"></a><a class="link" href="#_4_3_0">4.3.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix sparse checkout when directory with empty depth has nested children with non-empty depth</p>
</li>
<li>
<p>Upgrade gitlab4j-api to 6.0.0</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_4_2_1"><a class="anchor" href="#_4_2_1"></a><a class="link" href="#_4_2_1">4.2.1</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix infinite loop in <code>get-location-segments</code> command</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_4_2_0"><a class="anchor" href="#_4_2_0"></a><a class="link" href="#_4_2_0">4.2.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix GitLab 17.3+ hooks compatibility</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_4_1_0"><a class="anchor" href="#_4_1_0"></a><a class="link" href="#_4_1_0">4.1.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix GitLab access cache expiration</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_4_0_0"><a class="anchor" href="#_4_0_0"></a><a class="link" href="#_4_0_0">4.0.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Drop support for GitLab older than 10.2</p>
</li>
<li>
<p>Migrate from java-gitlab-api to gitlab4j-api</p>
</li>
<li>
<p>Fix compatibility with GitLab 16.9+</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_3_0_0"><a class="anchor" href="#_3_0_0"></a><a class="link" href="#_3_0_0">3.0.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Use virtual threads by default</p>
</li>
<li>
<p>Require Java 21+</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_2_9_8"><a class="anchor" href="#_2_9_8"></a><a class="link" href="#_2_9_8">2.9.8</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix chaos in changed files in <code>svn log</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_2_9_7"><a class="anchor" href="#_2_9_7"></a><a class="link" href="#_2_9_7">2.9.7</a></h3>
<div class="ulist">
<ul>
<li>
<p>Remove legacy code that could be a source of slowdown when working with LFS files</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_2_9_6"><a class="anchor" href="#_2_9_6"></a><a class="link" href="#_2_9_6">2.9.6</a></h3>
<div class="ulist">
<ul>
<li>
<p>More memory optimizations</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_2_9_5"><a class="anchor" href="#_2_9_5"></a><a class="link" href="#_2_9_5">2.9.5</a></h3>
<div class="ulist">
<ul>
<li>
<p>Add configurable cache policy for in-memory git entries</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_2_9_4"><a class="anchor" href="#_2_9_4"></a><a class="link" href="#_2_9_4">2.9.4</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix memory regressions</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_2_9_3"><a class="anchor" href="#_2_9_3"></a><a class="link" href="#_2_9_3">2.9.3</a></h3>
<div class="ulist">
<ul>
<li>
<p>More memory optimizations</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_2_9_2"><a class="anchor" href="#_2_9_2"></a><a class="link" href="#_2_9_2">2.9.2</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix <code>svn up</code> protocol error</p>
</li>
<li>
<p>More memory optimizations</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_2_9_1"><a class="anchor" href="#_2_9_1"></a><a class="link" href="#_2_9_1">2.9.1</a></h3>
<div class="ulist">
<ul>
<li>
<p>Unsorted memory optimizations</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_2_8_1"><a class="anchor" href="#_2_8_1"></a><a class="link" href="#_2_8_1">2.8.1</a></h3>
<div class="ulist">
<ul>
<li>
<p>Do not authenticate users by access token if they enter wrong username</p>
</li>
<li>
<p>Update snakeyaml to 2.2</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_2_8_0"><a class="anchor" href="#_2_8_0"></a><a class="link" href="#_2_8_0">2.8.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Update dependencies</p>
</li>
<li>
<p>Experimental string interning feature</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_2_7_1"><a class="anchor" href="#_2_7_1"></a><a class="link" href="#_2_7_1">2.7.1</a></h3>
<div class="ulist">
<ul>
<li>
<p>Update dependencies</p>
</li>
<li>
<p>Add option to authenticate using GitLab access tokens</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_2_6_0"><a class="anchor" href="#_2_6_0"></a><a class="link" href="#_2_6_0">2.6.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Update dependencies</p>
</li>
<li>
<p>Fix git-as-svn not caching visibility of non-public GitLab projects</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_2_5_0"><a class="anchor" href="#_2_5_0"></a><a class="link" href="#_2_5_0">2.5.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Update dependencies</p>
</li>
<li>
<p>Fix compatibility with GitLab &gt;= 15.2</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_2_4_0"><a class="anchor" href="#_2_4_0"></a><a class="link" href="#_2_4_0">2.4.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Update dependencies</p>
</li>
<li>
<p>Fix compatibility with Gitea &gt;= 1.16. <a href="https://github.com/git-as-svn/git-as-svn/issues/530">#530</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_2_3_0"><a class="anchor" href="#_2_3_0"></a><a class="link" href="#_2_3_0">2.3.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Update dependencies</p>
</li>
<li>
<p>Reduce memory consumption for repositories with big <code>.gitignore</code> or <code>.gitattributes</code>. <a href="https://github.com/git-as-svn/git-as-svn/issues/306">#306</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_2_2_0"><a class="anchor" href="#_2_2_0"></a><a class="link" href="#_2_2_0">2.2.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Add <code>glProtocol</code> option to configure GitLab <code>GL_PROTOCOL</code> server hooks environment variable</p>
</li>
<li>
<p>Update dependencies</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_2_1_1"><a class="anchor" href="#_2_1_1"></a><a class="link" href="#_2_1_1">2.1.1</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix startup failure when <code>format: Latest</code> is specified in config</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_2_1_0"><a class="anchor" href="#_2_1_0"></a><a class="link" href="#_2_1_0">2.1.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix SLF4J version. <a href="https://github.com/git-as-svn/git-as-svn/issues/484">#484</a></p>
</li>
<li>
<p>Update dependencies</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_2_0_0"><a class="anchor" href="#_2_0_0"></a><a class="link" href="#_2_0_0">2.0.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>git-as-svn migrated from Java to Kotlin</p>
</li>
<li>
<p>Java 8 is no longer supported.
Minimal is Java 11 now.</p>
</li>
<li>
<p>Update dependencies</p>
</li>
<li>
<p>git-as-svn no longer implicitly sets <code>svn:eol-style=native</code> for files by default</p>
</li>
<li>
<p>Starting with this release, git-as-svn introduces versioning for backward-incompatible changes.
You can control whether you opt-in for new features that require re-checkout of Subversion working copies via <code>format</code> repository parameter.
By default, git-as-svn uses the latest version and thus requires re-checkout if repository was initially created with older format.</p>
</li>
<li>
<p>Add support for non-ASCII logins and passwords</p>
</li>
<li>
<p>Deploy Debian packages to Cloudsmith. <a href="https://github.com/git-as-svn/git-as-svn/issues/370">#370</a></p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Repository data exported to SVN has changed.
Users will need to perform re-checkout of their working copies after git-as-svn upgrade unless you specify <code>format: V4</code> in <code>git-as-svn.conf</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_1_30_1"><a class="anchor" href="#_1_30_1"></a><a class="link" href="#_1_30_1">1.30.1</a></h3>
<div class="ulist">
<ul>
<li>
<p>Pass <code>GITALY_HOOKS_PAYLOAD</code> environment variable to GitLab hooks to fix compatibility with GitLab 13.7+. <a href="https://github.com/git-as-svn/git-as-svn/issues/367">#367</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_30_0"><a class="anchor" href="#_1_30_0"></a><a class="link" href="#_1_30_0">1.30.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix compatibility with GitLab 13.7+ LFS. <a href="https://github.com/git-as-svn/git-as-svn/issues/365">#365</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_29_0"><a class="anchor" href="#_1_29_0"></a><a class="link" href="#_1_29_0">1.29.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Update dependencies</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_28_1"><a class="anchor" href="#_1_28_1"></a><a class="link" href="#_1_28_1">1.28.1</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix regression bug introduced in 1.28.0 that made git-as-svn to ignore some configuration options</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_28_0"><a class="anchor" href="#_1_28_0"></a><a class="link" href="#_1_28_0">1.28.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Experimental empty dirs support. <a href="https://github.com/git-as-svn/git-as-svn/issues/126">#126</a></p>
</li>
<li>
<p>Update dependencies</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_27_0"><a class="anchor" href="#_1_27_0"></a><a class="link" href="#_1_27_0">1.27.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix compatibility with GitLab 13.1+. <a href="https://github.com/git-as-svn/git-as-svn/issues/355">#355</a></p>
</li>
<li>
<p>Update dependencies</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_26_1"><a class="anchor" href="#_1_26_1"></a><a class="link" href="#_1_26_1">1.26.1</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix compatibility with GitLab 12.10+. <a href="https://github.com/git-as-svn/git-as-svn/issues/347">#347</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_26_0"><a class="anchor" href="#_1_26_0"></a><a class="link" href="#_1_26_0">1.26.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Release remote LFS locks on commit unless keep-locks option is enabled</p>
</li>
<li>
<p>Block commit to locked file even if user claims he doesn&#8217;t have any local version of that file</p>
</li>
<li>
<p>Improve error message when commit is aborted due to lock</p>
</li>
<li>
<p>Update dependencies</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_25_2"><a class="anchor" href="#_1_25_2"></a><a class="link" href="#_1_25_2">1.25.2</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix file descriptor leak when <code>useHooksDir</code> is enabled</p>
</li>
<li>
<p>Update dependencies</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_25_1"><a class="anchor" href="#_1_25_1"></a><a class="link" href="#_1_25_1">1.25.1</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix compatibility with GitLab 12.9+ in <code>/etc/default/git-as-svn</code> that we provide. <a href="https://github.com/git-as-svn/git-as-svn/issues/337">#337</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_25_0"><a class="anchor" href="#_1_25_0"></a><a class="link" href="#_1_25_0">1.25.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Add <code>useHooksDir</code> option to <code>pusher: !pushEmbedded</code> that runs <code>hooks/&lt;hook_name&gt;.d/\*</code> executable files in addition to standard <code>hooks/&lt;hook_name&gt;</code>.
Note that this feature is an extension to standard Git behavior and is subject to change in any later git-as-svn releases.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_24_3"><a class="anchor" href="#_1_24_3"></a><a class="link" href="#_1_24_3">1.24.3</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix <code>svn unlock</code> not actually unlocking anything if lock token was not provided</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_24_2"><a class="anchor" href="#_1_24_2"></a><a class="link" href="#_1_24_2">1.24.2</a></h3>
<div class="ulist">
<ul>
<li>
<p>Upgrade httpclient to 4.5.12. <a href="https://github.com/git-as-svn/git-as-svn/issues/335">#335</a></p>
</li>
<li>
<p>Fix <code>get-locks</code> cmd not properly filtering paths when using HTTP LFS server</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_24_1"><a class="anchor" href="#_1_24_1"></a><a class="link" href="#_1_24_1">1.24.1</a></h3>
<div class="ulist">
<ul>
<li>
<p>Downgrade httpclient to 4.5.10. <a href="https://github.com/git-as-svn/git-as-svn/issues/335">#335</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_24_0"><a class="anchor" href="#_1_24_0"></a><a class="link" href="#_1_24_0">1.24.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix a bug that caused Git-LFS locks in GitLab to be created on behalf of administator user instead of the user who locks file through git-as-svn</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_23_1"><a class="anchor" href="#_1_23_1"></a><a class="link" href="#_1_23_1">1.23.1</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix "Malformed network data" error for <code>svn blame</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_23_0"><a class="anchor" href="#_1_23_0"></a><a class="link" href="#_1_23_0">1.23.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Drop support for nonstandard <code>eol=cr</code> in <code>.gitattributes</code> with no replacement</p>
</li>
<li>
<p>Drop support for nonstandard <code>eol=native</code> in <code>.gitattributes</code>.
Just add <code>text</code> attribute to indicate that file has native EOLs.</p>
</li>
<li>
<p>Use JGit to parse <code>.gitattributes</code> files.</p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Repository data exported to SVN has changed.
Users will need to perform re-checkout of their working copies after git-as-svn upgrade.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_1_22_0"><a class="anchor" href="#_1_22_0"></a><a class="link" href="#_1_22_0">1.22.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Systemd unit now correctly waits for git-as-svn to shut down. <a href="https://github.com/git-as-svn/git-as-svn/issues/275">#275</a></p>
</li>
<li>
<p>Update dependencies</p>
</li>
<li>
<p><code>/usr/bin/git-as-svn</code> no longer implicitly adds <code>-Xmx512m</code> JVM argument</p>
</li>
<li>
<p>Several file descriptor leaks fixed</p>
</li>
<li>
<p>git-as-svn no longer overrides <code>.gitattributes</code> settings with text/binary auto-detection</p>
</li>
<li>
<p><code>svn:mime-type=application/octet-stream</code> property is now added to files that have <code>-text</code> in <code>.gitattributes</code>. <a href="https://github.com/git-as-svn/git-as-svn/issues/317">#317</a></p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Repository data exported to SVN has changed.
Users will need to perform re-checkout of their working copies after git-as-svn upgrade.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_1_21_9"><a class="anchor" href="#_1_21_9"></a><a class="link" href="#_1_21_9">1.21.9</a></h3>
<div class="ulist">
<ul>
<li>
<p>Catastrophically speedup rename detection (~50x). <a href="https://github.com/git-as-svn/git-as-svn/issues/306">#306</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_21_8"><a class="anchor" href="#_1_21_8"></a><a class="link" href="#_1_21_8">1.21.8</a></h3>
<div class="ulist">
<ul>
<li>
<p>Write empty LFS files in a compatible with Git-LFS way</p>
</li>
<li>
<p>Update dependencies</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_21_7"><a class="anchor" href="#_1_21_7"></a><a class="link" href="#_1_21_7">1.21.7</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix Git LFS lock paths not handled properly, making it possible to lock same file multiple times</p>
</li>
<li>
<p>Send human-readable error message when locking fails due to already existing lock</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_21_6"><a class="anchor" href="#_1_21_6"></a><a class="link" href="#_1_21_6">1.21.6</a></h3>
<div class="ulist">
<ul>
<li>
<p>Add cleanup of bogus locks created with git-as-svn versions prior to 1.21.5</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_21_5"><a class="anchor" href="#_1_21_5"></a><a class="link" href="#_1_21_5">1.21.5</a></h3>
<div class="ulist">
<ul>
<li>
<p>Multiple fixes to remote LFS locking</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_21_4"><a class="anchor" href="#_1_21_4"></a><a class="link" href="#_1_21_4">1.21.4</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix commit of files larger than 8MB</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_21_3"><a class="anchor" href="#_1_21_3"></a><a class="link" href="#_1_21_3">1.21.3</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fixes to <code>lfsMode: !fileLfs</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_21_2"><a class="anchor" href="#_1_21_2"></a><a class="link" href="#_1_21_2">1.21.2</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix bogus slashes in branch names for GitLab mapping</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_21_1"><a class="anchor" href="#_1_21_1"></a><a class="link" href="#_1_21_1">1.21.1</a></h3>
<div class="ulist">
<ul>
<li>
<p>Reduce log spam (LDAP and client disconnects)</p>
</li>
<li>
<p>Log client version on connect</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_21_0"><a class="anchor" href="#_1_21_0"></a><a class="link" href="#_1_21_0">1.21.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Do not write to <code>/tmp</code> when streaming files from remote LFS server to SVN clients. <a href="https://github.com/git-as-svn/git-as-svn/issues/288">#288</a></p>
</li>
<li>
<p>Experimental <code>lfsMode: !fileLfs</code> LFS mode for GitLab</p>
</li>
<li>
<p><code>lfs: false</code> replaced with <code>lfsMode: null</code> in <code>!gitlab</code> section</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_20_5"><a class="anchor" href="#_1_20_5"></a><a class="link" href="#_1_20_5">1.20.5</a></h3>
<div class="ulist">
<ul>
<li>
<p>Log all exceptions when talking to SVN clients</p>
</li>
<li>
<p>Fixed double buffering of client I/O</p>
</li>
<li>
<p>Fix downloading of large files from remote LFS server.
Broken in 1.20.4</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_20_4"><a class="anchor" href="#_1_20_4"></a><a class="link" href="#_1_20_4">1.20.4</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix multiple file descriptor leaks</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_20_3"><a class="anchor" href="#_1_20_3"></a><a class="link" href="#_1_20_3">1.20.3</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix <code>svn blame</code> failing with "Malformed network data" error</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_20_2"><a class="anchor" href="#_1_20_2"></a><a class="link" href="#_1_20_2">1.20.2</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix LFS files returning -1 size for remote LFS. <a href="https://github.com/git-as-svn/git-as-svn/issues/282">#282</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_20_1"><a class="anchor" href="#_1_20_1"></a><a class="link" href="#_1_20_1">1.20.1</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix <code>git lfs unlock &lt;path&gt;</code> not finding LFS lock</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_20_0"><a class="anchor" href="#_1_20_0"></a><a class="link" href="#_1_20_0">1.20.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix inability to unlock files through Git-LFS</p>
</li>
<li>
<p>Fix lock paths having leading slash when listing locks via Git-LFS</p>
</li>
<li>
<p>Now path-based authorization supports branch-specific access</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_19_3"><a class="anchor" href="#_1_19_3"></a><a class="link" href="#_1_19_3">1.19.3</a></h3>
<div class="ulist">
<ul>
<li>
<p>Add <code>$authenticated:Local</code>/<code>$authenticated:GitLab</code>/<code>$authenticated:Gitea</code>/<code>$authenticated:LDAP</code> to refer to users authenticated against specific user database in path-based ACL</p>
</li>
<li>
<p>Fix git-lfs failing with "Not Acceptable" error when uploading files</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_19_2"><a class="anchor" href="#_1_19_2"></a><a class="link" href="#_1_19_2">1.19.2</a></h3>
<div class="ulist">
<ul>
<li>
<p>Improve GitLab configuration defaults</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_19_1"><a class="anchor" href="#_1_19_1"></a><a class="link" href="#_1_19_1">1.19.1</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix path-based ACL entry search. <a href="https://github.com/git-as-svn/git-as-svn/issues/276">#276</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_19_0"><a class="anchor" href="#_1_19_0"></a><a class="link" href="#_1_19_0">1.19.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Add support for <a href="https://subversion.apache.org/docs/release-notes/1.10#lz4-over-the-wire">LZ4 compression</a>.
Replace <code>compressionEnabled=true/false</code> option with <code>compressionLevel=LZ4/Zlib/None</code>. <a href="https://github.com/git-as-svn/git-as-svn/issues/163">#163</a></p>
</li>
<li>
<p>Fix severe performance loss on commit.
Broken in 1.8.0</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_18_0"><a class="anchor" href="#_1_18_0"></a><a class="link" href="#_1_18_0">1.18.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Add option to expose user-defined branches for GitLab.
See <a href="#_configuration">GitLab configuration</a> documentation. <a href="https://github.com/git-as-svn/git-as-svn/issues/188">#188</a></p>
</li>
<li>
<p><code>repositoryTags</code> is no longer supported for <code>!gitlabMapping</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_17_0"><a class="anchor" href="#_1_17_0"></a><a class="link" href="#_1_17_0">1.17.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Drop ability to configure custom hook names in <code>!pushEmbedded</code> because Git doesn&#8217;t have such feature.
Instead, add <code>hooksPath</code> option that works as an override to <code>core.hooksPath</code> Git configuration option.</p>
</li>
<li>
<p>Fix uploads of already existing files to remote LFS server.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_16_0"><a class="anchor" href="#_1_16_0"></a><a class="link" href="#_1_16_0">1.16.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Update Jetty to 9.4.19</p>
</li>
<li>
<p>Update Log4j to 2.12.0</p>
</li>
<li>
<p>Update git-lfs-java to 0.13.3</p>
</li>
<li>
<p>Add support for <code>core.hooksPath</code> Git configuration variable. <a href="https://github.com/git-as-svn/git-as-svn/issues/267">#267</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_15_0"><a class="anchor" href="#_1_15_0"></a><a class="link" href="#_1_15_0">1.15.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Now groups can be defined to contain other groups for path-based authorization</p>
</li>
<li>
<p>JGit updated to 5.4.0</p>
</li>
<li>
<p>UnboundID LDAP SDK updated to 4.0.11</p>
</li>
<li>
<p>google-oauth-client updated to 1.30.1</p>
</li>
<li>
<p>Remove <code>hookUrl</code> from <code>!gitlab</code> section, it is now automatically determined from <code>baseUrl</code> in <code>!web</code> section.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_14_0"><a class="anchor" href="#_1_14_0"></a><a class="link" href="#_1_14_0">1.14.0</a></h3>
<div class="ulist">
<ul>
<li>
<p><a href="#_authz">Experimental path-based authorization</a></p>
</li>
<li>
<p><code>-t</code> and <code>-T</code> command-line switches.
See <a href="#_commandline">Command-line parameters documentation</a></p>
</li>
<li>
<p><code>-s</code>/<code>--show-config</code> command-line switches removed.
Use <code>-T</code> instead.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_13_0"><a class="anchor" href="#_1_13_0"></a><a class="link" href="#_1_13_0">1.13.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Changed LDAP bind configuration.
See <a href="#_ldap">LDAP documentation</a>.</p>
</li>
<li>
<p>Organize logs into categories and add <a href="#_logging">logging documentation</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_12_0"><a class="anchor" href="#_1_12_0"></a><a class="link" href="#_1_12_0">1.12.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Experimental support for <a href="https://github.com/git-lfs/git-lfs/blob/master/docs/api/locking.md">LFS locking API</a>
Now git-as-svn forwards locking requests to LFS server. git-as-svn internal LFS server now supports LFS locks.
Locks are now scoped to whole repositories instead of being per-branch.
All existing svn locks will expire after upgrade.</p>
</li>
<li>
<p>URL scheme has changed, now it is <code>svn://&lt;host&gt;/&lt;repo&gt;/&lt;branch&gt;</code>.
Use <code>svn relocate</code> to fix existing SVN working copies.</p>
</li>
<li>
<p>It is no longer valid to map a single repository under multiple paths.
Use <code>branches</code> tag to expose multiple branches of a single repository to SVN.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_11_1"><a class="anchor" href="#_1_11_1"></a><a class="link" href="#_1_11_1">1.11.1</a></h3>
<div class="ulist">
<ul>
<li>
<p><code>!giteaSSHKeys</code> is no longer supported</p>
</li>
<li>
<p>Fix date formatting to be compatible with git-lfs.
Was broken in 1.11.0</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_11_0"><a class="anchor" href="#_1_11_0"></a><a class="link" href="#_1_11_0">1.11.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Add support for Gitea LFS server.
Gitea &gt;= 1.7.2 is required now.</p>
</li>
<li>
<p><code>!gitlabLfs {}</code> was replaced with <code>lfs: true</code> parameter in <code>!gitlab</code> section</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_10_1"><a class="anchor" href="#_1_10_1"></a><a class="link" href="#_1_10_1">1.10.1</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix PLAIN auth not working with passwords longer than 51 character. <a href="https://github.com/git-as-svn/git-as-svn/issues/242">#242</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_10_0"><a class="anchor" href="#_1_10_0"></a><a class="link" href="#_1_10_0">1.10.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>File locking code cleanup.
All existing svn locks will expire after upgrade.</p>
</li>
<li>
<p>Implement <code>get-file-revs</code> command.
This is expected to speed up <code>svn blame</code> severely. <a href="https://github.com/git-as-svn/git-as-svn/issues/231">#231</a></p>
</li>
<li>
<p><a href="https://subversion.apache.org/docs/release-notes/1.9#prospective-blame">Prospective blame</a> support added</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_9_0"><a class="anchor" href="#_1_9_0"></a><a class="link" href="#_1_9_0">1.9.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Major code cleanup</p>
</li>
<li>
<p><code>repository: !git</code> changed to just <code>repository:</code> in git-as-svn.conf</p>
</li>
<li>
<p><code>access: !acl</code> changed to just <code>acl:</code> in git-as-svn.conf</p>
</li>
<li>
<p><code>svn stat</code> is now compatible with native svn for nonexistent paths</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_8_1"><a class="anchor" href="#_1_8_1"></a><a class="link" href="#_1_8_1">1.8.1</a></h3>
<div class="ulist">
<ul>
<li>
<p>Update dependencies: jgit-5.3.0, svnkit-1.10.0, jetty-9.4.15, java-gitea-api-1.7.4, unboundid-ldapsdk-4.0.10 and others</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_8_0"><a class="anchor" href="#_1_8_0"></a><a class="link" href="#_1_8_0">1.8.0</a></h3>
<div class="ulist">
<ul>
<li>
<p><code>!lfs</code> renamed to <code>!localLfs</code> in git-as-svn.conf</p>
</li>
<li>
<p>Experimental support for GitLab LFS (<code>!gitlabLfs {}</code>). <a href="https://github.com/git-as-svn/git-as-svn/issues/175">#175</a>, <a href="https://github.com/git-as-svn/git-as-svn/issues/212">#212</a>, <a href="https://github.com/git-as-svn/git-as-svn/issues/213">#213</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_7_6_1"><a class="anchor" href="#_1_7_6_1"></a><a class="link" href="#_1_7_6_1">1.7.6.1</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix broken URL construction in git-lfs-authenticate</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_7_6"><a class="anchor" href="#_1_7_6"></a><a class="link" href="#_1_7_6">1.7.6</a></h3>
<div class="ulist">
<ul>
<li>
<p>git-lfs-authenticate no longer silently falls back to anonymous mode if it failed to obtain user token</p>
</li>
<li>
<p>git-lfs-authenticate now properly handles absolute repository paths</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_7_5"><a class="anchor" href="#_1_7_5"></a><a class="link" href="#_1_7_5">1.7.5</a></h3>
<div class="ulist">
<ul>
<li>
<p>Ensure hook stdout is closed when using embedded pusher</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_7_4"><a class="anchor" href="#_1_7_4"></a><a class="link" href="#_1_7_4">1.7.4</a></h3>
<div class="ulist">
<ul>
<li>
<p>Revert <a href="https://github.com/git-as-svn/git-as-svn/issues/215">#215</a>, causes tens of thousands of CLOSE_WAIT connections in Jetty</p>
</li>
<li>
<p>Update Jetty to 9.4.14</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_7_3"><a class="anchor" href="#_1_7_3"></a><a class="link" href="#_1_7_3">1.7.3</a></h3>
<div class="ulist">
<ul>
<li>
<p>Reduce number of threads by using same thread pool for svn:// and http://. <a href="https://github.com/git-as-svn/git-as-svn/issues/215">#215</a></p>
</li>
<li>
<p>Fix compatibility with latest Gitea. <a href="https://github.com/git-as-svn/git-as-svn/issues/218">#218</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_7_2"><a class="anchor" href="#_1_7_2"></a><a class="link" href="#_1_7_2">1.7.2</a></h3>
<div class="ulist">
<ul>
<li>
<p>Reduce lock contention during commit</p>
</li>
<li>
<p>Log how long commit hooks take</p>
</li>
<li>
<p>Do not log exception stacktraces on client-side issues during commit</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_7_1"><a class="anchor" href="#_1_7_1"></a><a class="link" href="#_1_7_1">1.7.1</a></h3>
<div class="ulist">
<ul>
<li>
<p>Revert offloading file &#8594; changed revisions cache to MapDB (<a href="https://github.com/git-as-svn/git-as-svn/issues/207">#207</a>) as an attempt to fix (or, at least, reduce) issues with non-heap memory leaks</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_7_0"><a class="anchor" href="#_1_7_0"></a><a class="link" href="#_1_7_0">1.7.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Dramatically improve memory usage by offloading file &#8594; changed revisions cache to MapDB</p>
</li>
<li>
<p>--unsafe option no longer exists, all "unsafe" functionality was removed</p>
</li>
<li>
<p>git-lfs-authenticate.cfg format has changed.
Now, git-lfs-authenticate talks to git-as-svn via http and uses shared token.</p>
</li>
<li>
<p>!api no longer exists in git-as-svn.conf</p>
</li>
<li>
<p>!socket no longer exists in git-as-svn.conf</p>
</li>
<li>
<p>LFS storage is no longer silently created, instead LfsFilter will error out when encounters LFS pointer without configured LFS storage</p>
</li>
<li>
<p>JGit updated to 5.1.2</p>
</li>
<li>
<p>GitLab API updated to 4.1.0</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_6_2"><a class="anchor" href="#_1_6_2"></a><a class="link" href="#_1_6_2">1.6.2</a></h3>
<div class="ulist">
<ul>
<li>
<p>[Gitea] Support uppercase letters in usernames / repository names. <a href="https://github.com/git-as-svn/git-as-svn/issues/196">#196</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_6_1"><a class="anchor" href="#_1_6_1"></a><a class="link" href="#_1_6_1">1.6.1</a></h3>
<div class="ulist">
<ul>
<li>
<p>Update dependencies. <a href="https://github.com/git-as-svn/git-as-svn/issues/190">#190</a></p>
</li>
<li>
<p>[Gitea] Fixes to directory watcher. <a href="https://github.com/git-as-svn/git-as-svn/issues/192">#192</a></p>
</li>
<li>
<p>Deploy Debian packages to Bintray. <a href="https://github.com/git-as-svn/git-as-svn/issues/194">#194</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_6_0"><a class="anchor" href="#_1_6_0"></a><a class="link" href="#_1_6_0">1.6.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Java 9/10/11 compatibility</p>
</li>
<li>
<p><a href="https://gitea.io">Gitea</a> integration added</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_5_0"><a class="anchor" href="#_1_5_0"></a><a class="link" href="#_1_5_0">1.5.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Add tag-based repository filtering for GitLab integration</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_4_0"><a class="anchor" href="#_1_4_0"></a><a class="link" href="#_1_4_0">1.4.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Update JGit to 5.0.1.201806211838-r</p>
</li>
<li>
<p>Update SVNKit to 1.9.3</p>
</li>
<li>
<p>Reduce memory usage</p>
</li>
<li>
<p>Improve indexing performance</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_3_0"><a class="anchor" href="#_1_3_0"></a><a class="link" href="#_1_3_0">1.3.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Switch to GitLab API v4. Fixes compatibility with GitLab &gt;= 11. <a href="https://github.com/git-as-svn/git-as-svn/issues/176">#176</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_2_0"><a class="anchor" href="#_1_2_0"></a><a class="link" href="#_1_2_0">1.2.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>x10 speedup of LDAP authentication</p>
</li>
<li>
<p>Drop dependency on GSon in favor of Jackson2</p>
</li>
<li>
<p>Update unboundid-ldapsdk to 4.0.3</p>
</li>
<li>
<p>Fix post-receive hook failing on GitLab 10 <a href="https://github.com/git-as-svn/git-as-svn/issues/160">#160</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_1_9"><a class="anchor" href="#_1_1_9"></a><a class="link" href="#_1_1_9">1.1.9</a></h3>
<div class="ulist">
<ul>
<li>
<p>Update MapDB to 3.0.5 <a href="https://github.com/git-as-svn/git-as-svn/issues/161">#161</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_1_8"><a class="anchor" href="#_1_1_8"></a><a class="link" href="#_1_1_8">1.1.8</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix git-as-svn unable to find prefix-mapped repositories (broken in 1.1.2)</p>
</li>
<li>
<p>Fix PLAIN authentication with native SVN client (broken in 1.1.4)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_1_7"><a class="anchor" href="#_1_1_7"></a><a class="link" href="#_1_1_7">1.1.7</a></h3>
<div class="ulist">
<ul>
<li>
<p>Use OAuth2 to obtain user token.
Fixes compatibility with GitLab &gt;= 10.2 <a href="https://github.com/git-as-svn/git-as-svn/issues/154">#154</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_1_6"><a class="anchor" href="#_1_1_6"></a><a class="link" href="#_1_1_6">1.1.6</a></h3>
<div class="ulist">
<ul>
<li>
<p>Update various third-party libraries</p>
</li>
<li>
<p>Upgrade to Gradle 4.4</p>
</li>
<li>
<p>Fix GitLab repositories not becoming ready on git-as-svn startup <a href="https://github.com/git-as-svn/git-as-svn/issues/151">#151</a></p>
</li>
<li>
<p>Improve logging on git-as-svn startup</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_1_5"><a class="anchor" href="#_1_1_5"></a><a class="link" href="#_1_1_5">1.1.5</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix submodules support (was broken in 1.1.3)</p>
</li>
<li>
<p>Invalidate caches properly if renameDetection setting was changed</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_1_4"><a class="anchor" href="#_1_1_4"></a><a class="link" href="#_1_1_4">1.1.4</a></h3>
<div class="ulist">
<ul>
<li>
<p>Upgrade Kryo to 4.0.1 <a href="https://github.com/git-as-svn/git-as-svn/issues/121">#121</a></p>
</li>
<li>
<p>Add option to disable parallel repository indexing on startup <a href="https://github.com/git-as-svn/git-as-svn/issues/121">#121</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_1_3"><a class="anchor" href="#_1_1_3"></a><a class="link" href="#_1_1_3">1.1.3</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix ISO 8601 date formatting.</p>
</li>
<li>
<p>Fix unexpected error message on locked file update <a href="https://github.com/git-as-svn/git-as-svn/issues/127">#127</a>.</p>
</li>
<li>
<p>Increase default token expire time to one hour (3600 sec).</p>
</li>
<li>
<p>Add string-suffix parameter for git-lfs-authenticate script.</p>
</li>
<li>
<p>Index repositories using multiple threads on startup <a href="https://github.com/git-as-svn/git-as-svn/issues/132">#132</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_1_2"><a class="anchor" href="#_1_1_2"></a><a class="link" href="#_1_1_2">1.1.2</a></h3>
<div class="ulist">
<ul>
<li>
<p>Add reference to original commit as parent for prevent commit removing by <code>git gc</code> <a href="https://github.com/git-as-svn/git-as-svn/issues/118">#118</a>.</p>
</li>
<li>
<p>Fix repository mapping error <a href="https://github.com/git-as-svn/git-as-svn/issues/122">#122</a>.</p>
</li>
<li>
<p>Fix non ThreadSafe Kryo usage <a href="https://github.com/git-as-svn/git-as-svn/issues/121">#121</a>.</p>
</li>
<li>
<p>Add support for combine multiple authenticators.</p>
</li>
<li>
<p>Add support for authenticator cache.</p>
</li>
<li>
<p>Fix tree conflict on Windows after renaming file with same name in another case <a href="https://github.com/git-as-svn/git-as-svn/issues/123">#123</a>.</p>
</li>
<li>
<p>Use commit author instead of commiter identity in svn log.</p>
</li>
<li>
<p>Don&#8217;t allow almost expired tokens for LFS pointer requests.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_1_1"><a class="anchor" href="#_1_1_1"></a><a class="link" href="#_1_1_1">1.1.1</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix "E210002: Network connection closed unexpectedly" on client update failure <a href="https://github.com/git-as-svn/git-as-svn/issues/114">#114</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_1_0"><a class="anchor" href="#_1_1_0"></a><a class="link" href="#_1_1_0">1.1.0</a></h3>
<div class="ulist">
<ul>
<li>
<p>Use by default svn:eol-style = native for text files (fix <a href="https://github.com/git-as-svn/git-as-svn/issues/106">#106</a>).</p>
</li>
<li>
<p>Upload .deb package to debian repository.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_0_17_alpha"><a class="anchor" href="#_1_0_17_alpha"></a><a class="link" href="#_1_0_17_alpha">1.0.17-alpha</a></h3>
<div class="ulist">
<ul>
<li>
<p>Add PDF, EPUB manual.</p>
</li>
<li>
<p>Add support for anonymous authentication for public repositories.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_0_16_alpha"><a class="anchor" href="#_1_0_16_alpha"></a><a class="link" href="#_1_0_16_alpha">1.0.16-alpha</a></h3>
<div class="ulist">
<ul>
<li>
<p>Rewrite GitLab authentication <a href="https://github.com/git-as-svn/git-as-svn/issues/110">#110</a>.</p>
</li>
<li>
<p>Fix some permission check issues <a href="https://github.com/git-as-svn/git-as-svn/issues/110">#110</a>.</p>
</li>
<li>
<p>Generate token in LFS server instead pass original authentication data <a href="https://github.com/git-as-svn/git-as-svn/issues/105">#105</a>.</p>
</li>
<li>
<p>Ignore unknown GitLab hook data.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_0_15_alpha"><a class="anchor" href="#_1_0_15_alpha"></a><a class="link" href="#_1_0_15_alpha">1.0.15-alpha</a></h3>
<div class="ulist">
<ul>
<li>
<p>Add support for GitLab 8.2 LFS storage layout <a href="https://github.com/git-as-svn/git-as-svn/issues/109">#109</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_0_14_alpha"><a class="anchor" href="#_1_0_14_alpha"></a><a class="link" href="#_1_0_14_alpha">1.0.14-alpha</a></h3>
<div class="ulist">
<ul>
<li>
<p>Add debian packaging.</p>
</li>
<li>
<p>Add configurable file logging.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_0_13_alpha"><a class="anchor" href="#_1_0_13_alpha"></a><a class="link" href="#_1_0_13_alpha">1.0.13-alpha</a></h3>
<div class="ulist">
<ul>
<li>
<p>Embedded git-lfs server</p>
</li>
<li>
<p>Git-lfs batch API support.</p>
</li>
<li>
<p>Add support for LDAP users without email.</p>
</li>
<li>
<p>Add support for X-Forwarded-* headers.</p>
</li>
<li>
<p>Add HTTP-requests logging.</p>
</li>
<li>
<p>Change .gitignore mapping: ignored folder now mask all content as ignored.</p>
</li>
<li>
<p>Fix git-lfs file commit.</p>
</li>
<li>
<p>Fix quote parsing for .tgitconfig file.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_0_12_alpha"><a class="anchor" href="#_1_0_12_alpha"></a><a class="link" href="#_1_0_12_alpha">1.0.12-alpha</a></h3>
<div class="ulist">
<ul>
<li>
<p>Initial git-lfs support (embedded git-lfs server).</p>
</li>
<li>
<p>Initial GitLab integration.</p>
</li>
<li>
<p>Import project list on startup.</p>
</li>
<li>
<p>Authentication.</p>
</li>
<li>
<p>Add support for embedded git push with hooks;</p>
</li>
<li>
<p>Git-as-svn change information moved outside git repostitory <a href="https://github.com/git-as-svn/git-as-svn/issues/60">#60</a>.</p>
</li>
<li>
<p>Configuration format changed.</p>
</li>
<li>
<p>Fixed some wildcard issues.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_0_11_alpha"><a class="anchor" href="#_1_0_11_alpha"></a><a class="link" href="#_1_0_11_alpha">1.0.11-alpha</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix URL in authentication result on default port (Jenkins error: <code>E21005: Impossibly long repository root from server</code>).</p>
</li>
<li>
<p>Fix bind on already used port with flag SO_REUSEADDR (thanks for @fcharlie, <a href="https://github.com/git-as-svn/git-as-svn/issues/70">#70</a>).</p>
</li>
<li>
<p>Add support for custom certificate for ldaps authentication.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_0_10_alpha"><a class="anchor" href="#_1_0_10_alpha"></a><a class="link" href="#_1_0_10_alpha">1.0.10-alpha</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix get file size performance issue (<code>svn ls</code>).</p>
</li>
<li>
<p>Fix update IMMEDIATES to INFINITY bug.</p>
</li>
<li>
<p>Fix NPE on absent email in LDAP.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_0_9_alpha"><a class="anchor" href="#_1_0_9_alpha"></a><a class="link" href="#_1_0_9_alpha">1.0.9-alpha</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix svn update after aborted update/checkout.</p>
</li>
<li>
<p>Fix out-of-memory when update/checkout big directory.</p>
</li>
<li>
<p>Show version number on startup.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_0_8_alpha"><a class="anchor" href="#_1_0_8_alpha"></a><a class="link" href="#_1_0_8_alpha">1.0.8-alpha</a></h3>
<div class="ulist">
<ul>
<li>
<p>Support commands: <code>svn lock</code>/<code>svn unlock</code>.</p>
</li>
<li>
<p>Multiple repositories support.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_0_7_alpha"><a class="anchor" href="#_1_0_7_alpha"></a><a class="link" href="#_1_0_7_alpha">1.0.7-alpha</a></h3>
<div class="ulist">
<ul>
<li>
<p>More simple demonstration run</p>
</li>
<li>
<p><code>svnsync</code> support</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_0_6_alpha"><a class="anchor" href="#_1_0_6_alpha"></a><a class="link" href="#_1_0_6_alpha">1.0.6-alpha</a></h3>
<div class="ulist">
<ul>
<li>
<p>Add autodetection binary files (now file has <code>svn:mime-type = application/octet-stream</code> if it set as binary in .gitattributes or detected as binary).</p>
</li>
<li>
<p>Expose committer email to svn.</p>
</li>
<li>
<p>Fix getSize() for submodules.</p>
</li>
<li>
<p>Fix temporary file lifetime.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_0_5_alpha"><a class="anchor" href="#_1_0_5_alpha"></a><a class="link" href="#_1_0_5_alpha">1.0.5-alpha</a></h3>
<div class="ulist">
<ul>
<li>
<p>Add persistent cache support.</p>
</li>
<li>
<p>Dumb locks support.</p>
</li>
<li>
<p>Fix copy-from permission issue.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_0_4_alpha"><a class="anchor" href="#_1_0_4_alpha"></a><a class="link" href="#_1_0_4_alpha">1.0.4-alpha</a></h3>
<div class="ulist">
<ul>
<li>
<p>Improve error message when commit is rejected due to wrong properties.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_0_3_alpha"><a class="anchor" href="#_1_0_3_alpha"></a><a class="link" href="#_1_0_3_alpha">1.0.3-alpha</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix spaces in url.</p>
</li>
<li>
<p>Add support get-locations.</p>
</li>
<li>
<p>Add mapping binary to <code>svn:mime-type = svn:mime-type</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_0_2_alpha"><a class="anchor" href="#_1_0_2_alpha"></a><a class="link" href="#_1_0_2_alpha">1.0.2-alpha</a></h3>
<div class="ulist">
<ul>
<li>
<p>Fix some critical bugs.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_0_1_alpha"><a class="anchor" href="#_1_0_1_alpha"></a><a class="link" href="#_1_0_1_alpha">1.0.1-alpha</a></h3>
<div class="ulist">
<ul>
<li>
<p>Add support for more subversion commands</p>
</li>
<li>
<p>Fix some bugs.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_0_0_alpha"><a class="anchor" href="#_1_0_0_alpha"></a><a class="link" href="#_1_0_0_alpha">1.0.0-alpha</a></h3>
<div class="ulist">
<ul>
<li>
<p>First release.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Operations are supported,but copy/move information is not explicitly saved to repository. Instead,it is auto-calculated from Git commits
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. Git submodule data is only available in read-only mode.
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 4.3.0<br>
Last updated 2026-02-04 15:14:46
</div>
</div>
</body>
</html>